import{aJ as N,j as s,x as b,e as c,r as o,ax as g,a as p,aN as y,d as T,s as C}from"./index-1SOVWjLS.js";import{I as O}from"./Icons-DhR5o7Kp.js";import{R as _}from"./index-DTNH96F3.js";import{u as z,P as D}from"./useRazorpayPayment-BZZTgr_4.js";import"./ContextIsolator-GbFQ609C.js";import"./index-ACy-ARWx.js";import"./index-CcET_qEc.js";import"./actions-rqIah-Yr.js";const R=({selectedPaper:i})=>{var e;const{rating:t,views:a}=N(i);return s.jsxs("div",{className:"relative  mx-auto bg-gradient-to-r from-blue-800 to-blue-900 text-white py-6  gap-4 overflow-hidden",children:[s.jsxs("div",{className:"w-10/12 flex mx-auto",children:[s.jsxs("div",{className:"w-2/3  flex flex-col justify-between ",children:[s.jsx("h3",{className:"text-4xl font-bold py-2 line-clamp-4",children:i==null?void 0:i.title}),s.jsx("p",{className:"italic line-clamp-5",children:i==null?void 0:i.description}),s.jsxs("div",{className:"flex gap-3 my-3 ",children:[s.jsx("img",{src:O.LOGO,className:"w-10 h-10 rounded-full bg-red-300"}),s.jsx("div",{className:"text-left flex items-center",children:s.jsxs("p",{children:["Instructor: ",(e=i==null?void 0:i.tutor)==null?void 0:e.name]})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:t}),s.jsx(_,{className:"px-1",value:t,disabled:!0,allowHalf:!0}),s.jsx("span",{children:a?`(${a})`:""})]}),s.jsx("div",{className:"bg-white/20 rounded-xl p-3  text-white flex flex-col justify-between",children:s.jsx("p",{className:"flex justify-between items-center",children:s.jsxs("span",{className:"flex items-center space-x-2 font-semibold text-2xl",children:[s.jsx("span",{className:"w-5 h-5 bg-white rounded-full relative",children:s.jsx("span",{className:"w-3 h-3 bg-[#FF8F18] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),i!=null&&i.is_paid?s.jsxs("span",{children:["₹ ",i==null?void 0:i.amount," Only"]}):s.jsx("span",{children:"Free "})]})})})]}),s.jsx("div",{className:"w-1/3",children:s.jsx("div",{className:"h-[30rem] object-contain flex items-center justify-center ",children:s.jsx("img",{className:" h-full",src:i==null?void 0:i.thumbnail_url,alt:"Course Thumbnail Image"})})})]}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[50vw] h-[50vw] max-w-[20rem] max-h-[20rem] -top-[10vw] -left-[10vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[25vw] h-[25vw] max-w-[12rem] max-h-[12rem] top-[2vw] right-[40vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[25vw] left-[30vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[30vw] right-[5vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] -top-[5vw] -right-[5vw]"})]})},M=()=>{const{dispatch:i}=C,{paperId:t}=b(),{selectedPaper:a,papers:e}=c(n=>n.paper),{initiatePayment:u,razorpayDivRef:S}=z(),[h,l]=o.useState(!1),[r,f]=o.useState(!1),{openPrompt:d}=g(),{userDetails:w}=c(n=>n.auth),{showToast:j}=p(),v=()=>{if(!w){d();return}l(!0),u({useCoins:r,type:D.BOOK,itemId:a==null?void 0:a.id,name:a==null?void 0:a.title,description:a==null?void 0:a.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:n=>{m(),j("Purchase Success!")}}).finally(()=>l(!1))};o.useEffect(()=>{t&&m()},[t]);const m=()=>{i(y({id:t}))},{theme:x}=T();return s.jsxs("div",{children:[s.jsx(R,{selectedPaper:a}),s.jsxs("div",{className:"p-6 font-bold",children:[s.jsxs("p",{className:"text-2xl flex justify-between items-center",children:[s.jsx("span",{children:"Summary"}),s.jsxs("div",{className:"flex",children:[!(a!=null&&a.is_purchased)&&(a==null?void 0:a.is_paid)&&s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"useCoins",type:"checkbox",value:r,onChange:n=>f(n.target.checked),className:"accent-[#F68713] h-4 w-4 transform scale-150"}),s.jsx("label",{htmlFor:"useCoins",className:"mx-3 text-xl",children:"Use My Coins"})]})}),a!=null&&a.is_purchased||!(a!=null&&a.is_paid)?s.jsx("a",{href:a==null?void 0:a.paper_url,download:!0,target:"_blank",rel:"noopener noreferrer",className:`px-5 py-3 text-xl ${x.COLOR_BUTTON}`,children:"Download"}):s.jsx("button",{onClick:v,disabled:h,className:`px-5 py-3 text-xl ${x.COLOR_BUTTON}`,children:"Purchase Now"})]})]}),s.jsxs("p",{className:"text-xl ",children:["Total: ₹",a==null?void 0:a.amount]}),s.jsxs("p",{children:["No refunds or credits for unused or partial periods (unless required by law). Access starts immediately upon purchase with an initial charge of ₹",a==null?void 0:a.amount,". Recurring charges apply for continued access. To avoid future billing, cancel before the next cycle. By confirming the purchase, the user agrees to the Terms and authorizes recurring payments."]})]})]})};export{M as default};
