import{aH as v,j as s,x as b,e as u,r as n,ax as N,a as g,aI as y,d as T,s as C}from"./index-1SOVWjLS.js";import{I as O}from"./Icons-DhR5o7Kp.js";import{R as P}from"./index-DTNH96F3.js";import{u as _,P as z}from"./useRazorpayPayment-BZZTgr_4.js";import"./ContextIsolator-GbFQ609C.js";import"./index-ACy-ARWx.js";import"./index-CcET_qEc.js";import"./actions-rqIah-Yr.js";const D=({selectedBook:e})=>{var t;const{rating:r,views:a}=v(e);return s.jsxs("div",{className:"relative  mx-auto bg-gradient-to-r from-blue-800 to-blue-900 text-white py-6  gap-4 overflow-hidden",children:[s.jsxs("div",{className:"w-10/12 flex mx-auto",children:[s.jsxs("div",{className:"w-2/3  flex flex-col justify-between ",children:[s.jsx("h3",{className:"text-4xl font-bold py-2 line-clamp-4",children:e==null?void 0:e.title}),s.jsx("p",{className:"italic line-clamp-5",children:e==null?void 0:e.description}),s.jsxs("div",{className:"flex gap-3 my-3 ",children:[s.jsx("img",{src:O.LOGO,className:"w-10 h-10 rounded-full bg-red-300"}),s.jsx("div",{className:"text-left flex items-center",children:s.jsxs("p",{children:["Instructor: ",(t=e==null?void 0:e.tutor)==null?void 0:t.name]})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:r}),s.jsx(P,{className:"px-1",value:r,disabled:!0,allowHalf:!0}),s.jsx("span",{children:a?`(${a})`:""})]}),s.jsx("div",{className:"bg-white/20 rounded-xl p-3  text-white flex flex-col justify-between",children:s.jsx("p",{className:"flex justify-between items-center",children:s.jsxs("span",{className:"flex items-center space-x-2 font-semibold text-2xl",children:[s.jsx("span",{className:"w-5 h-5 bg-white rounded-full relative",children:s.jsx("span",{className:"w-3 h-3 bg-[#FF8F18] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),e!=null&&e.is_paid?s.jsxs("span",{children:["₹ ",e==null?void 0:e.amount," Only"]}):s.jsx("span",{children:"Free "})]})})})]}),s.jsx("div",{className:"w-1/3",children:s.jsx("div",{className:"h-[30rem] object-contain flex items-center justify-center ",children:s.jsx("img",{className:" h-full",src:e==null?void 0:e.thumbnail_url,alt:"Course Thumbnail Image"})})})]}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[50vw] h-[50vw] max-w-[20rem] max-h-[20rem] -top-[10vw] -left-[10vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[25vw] h-[25vw] max-w-[12rem] max-h-[12rem] top-[2vw] right-[40vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[25vw] left-[30vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[30vw] right-[5vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] -top-[5vw] -right-[5vw]"})]})},M=()=>{const{dispatch:e}=C,{bookId:r}=b(),{selectedBook:a,books:t}=u(i=>i.book),{initiatePayment:h,razorpayDivRef:R}=_(),[p,l]=n.useState(!1),[m,f]=n.useState(!1),{openPrompt:d}=N(),{userDetails:w}=u(i=>i.auth),{showToast:o}=g(),j=()=>{if(!w){d();return}l(!0),h({useCoins:m,type:z.BOOK,itemId:a==null?void 0:a.id,name:a==null?void 0:a.title,description:a==null?void 0:a.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:i=>{x(),o("Purchase Success!")}}).finally(()=>l(!1))};n.useEffect(()=>{r&&x()},[r]);const x=()=>{e(y({id:r}))},{theme:c}=T();return s.jsxs("div",{children:[s.jsx(D,{selectedBook:a}),s.jsxs("div",{className:"p-6 font-bold",children:[s.jsxs("p",{className:"text-2xl flex justify-between items-center",children:[s.jsx("span",{children:"Summary"}),s.jsxs("div",{className:"flex",children:[!(a!=null&&a.is_purchased)&&(a==null?void 0:a.is_paid)&&s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"useCoins",type:"checkbox",value:m,onChange:i=>f(i.target.checked),className:"accent-[#F68713] h-4 w-4 transform scale-150"}),s.jsx("label",{htmlFor:"useCoins",className:"mx-3 text-xl",children:"Use My Coins"})]})}),a!=null&&a.is_purchased||!(a!=null&&a.is_paid)?s.jsx("a",{href:a==null?void 0:a.book_url,download:!0,target:"_blank",rel:"noopener noreferrer",className:`px-5 py-3 text-xl ${c.COLOR_BUTTON}`,children:"Download"}):s.jsx("button",{onClick:j,disabled:p,className:`px-5 py-3 text-xl ${c.COLOR_BUTTON}`,children:"Purchase Now"})]})]}),s.jsxs("p",{className:"text-xl ",children:["Total: ₹",a==null?void 0:a.amount]}),s.jsxs("p",{children:["No refunds or credits for unused or partial periods (unless required by law). Access starts immediately upon purchase with an initial charge of ₹",a==null?void 0:a.amount,". Recurring charges apply for continued access. To avoid future billing, cancel before the next cycle. By confirming the purchase, the user agrees to the Terms and authorizes recurring payments."]})]})]})};export{M as default};
