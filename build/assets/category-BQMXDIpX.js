import{c as T,r as g,j as t,m as N,S as m,T as I,U as P,V,W as p,s as q}from"./index-CRih-8pH.js";import{D as z}from"./DynamicForm-Ct_qjGl9.js";import{A as B,R as L}from"./ActionButtons-C2E8ef9O.js";import{u as h,A as U,C as x}from"./useModal-C6s4dySA.js";import{T as W}from"./Toast-Ch7gPG5F.js";import{u as $}from"./usePagination-D6Yf-egv.js";import{u as G}from"./useToast-D87k8Puz.js";import{R as H}from"./EditOutlined-ByG8k4UA.js";import"./index-Z-wI26Jq.js";import"./SearchOutlined-CZW_OZ7t.js";const re=()=>{const{dispatch:s}=q,{categories:y,totalCategories:f,selectedCategory:o}=T(e=>e.category),{toasts:C,showToast:r}=G(),{isOpen:b,openModal:u,closeModal:F}=h(),{isOpen:j,openModal:w,closeModal:i}=h(),n=g.useRef(),{page:M,setPage:A,limit:E,setLimit:O,search:J,setSearch:K,fetchData:l}=$(N,{},e=>{},e=>r(e,"error"));g.useEffect(()=>{l()},[]);const k=(e,a)=>{A(e),O(a),l()},D=[{title:"Category Name",dataIndex:"category",key:"category"},{title:"Action",key:"action",render:(e,a)=>t.jsx(B,{buttons:[{text:"Edit",onClick:()=>{s(m(a)),u()},icon:H,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{w(),s(m(a))},icon:L,color:{text:"text-red-600",bg:"bg-red-100",hover:"hover:bg-red-200"}}]})}],v=[Object.keys(o).length&&{name:"id",label:"id",type:"hidden"},{name:"category",label:"Category Name",type:"text",inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",required:!0}],R=e=>{const a=Object.keys(o).length?I:P;s(a(e)).unwrap().then(d=>{c(),l(),r(d.message,"success")}).catch(d=>{c(),r(d,"error")})},S=()=>{s(V(o)).unwrap().then(e=>{i(),l(),s(p()),r(e.message,"success")}).catch(e=>{i(),r(e,"error")})};g.useEffect(()=>{n.current&&o&&n.current.resetForm({...o})},[o]);const c=()=>{F(),n.current.resetForm({category:null}),s(p())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12",children:[t.jsx("h1",{className:"text-2xl font-bold text-center text-[#FF6200]",children:"Category Management"}),t.jsx("button",{onClick:u,className:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300",children:"Add Category"})]}),t.jsx(U,{columns:D,dataSource:y,current:M,pageSize:E,total:f,onChange:k}),t.jsx(W,{toasts:C}),t.jsx(x,{title:Object.keys(o).length?"Edit Category":"Add Category",isOpen:b,onCancel:c,footer:null,children:t.jsx(z,{ref:n,formConfig:v,onSubmit:R,initialValues:o,formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(x,{title:"Confirm Deletion",isOpen:j,onCancel:i,onOk:S,children:t.jsx("p",{children:"Are you sure you want to delete this category?"})})]})};export{re as default};
