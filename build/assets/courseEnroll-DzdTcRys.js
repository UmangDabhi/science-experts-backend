import{ao as i,ap as T,aq as t,ar as v,as as _,at as p,au as L,av as w,v as R,d as h,r as c,a as P,C as S,ak as M,j as s,s as O}from"./index-SPnFrvr_.js";import{u as k,P as D}from"./useRazorpayPayment-CHB5R0Au.js";import{R as A}from"./index-BYiafMc-.js";import"./actions-BBMu0VTz.js";import"./index-D8y3FOo-.js";const F=i("enrollment/create_enrollment",v,t.CREATE_ENROLLMENT),U=i("enrollment/get_all_enrollments",p,n=>_(t.GET_ALL_ENROLLMENT,n));i(t.GET_ENROLLMENT,p,n=>t.GET_ENROLLMENT+"/"+n.id);i(t.UPDATE_ENROLLMENT,L,n=>t.UPDATE_ENROLLMENT+"/"+n.id);i(t.DELETE_ENROLLMENT,w,n=>t.DELETE_ENROLLMENT+"/"+n.id);const I={enrollments:[],selectedEnrollment:{},totalEnrollments:0};T({name:"enrollment",initialState:I,reducers:{resetEnrollmentSlice:n=>{n.enrollments=[],n.selectedEnrollment={},n.totalEnrollments=0},setEnrollment:(n,l)=>{n.selectedEnrollment=l.payload},deselectEnrollment:n=>{n.selectedEnrollment={}}},extraReducers:n=>{n.addCase(U.fulfilled,(l,a)=>{l.enrollments=a.payload.data.data,l.totalEnrollments=a.payload.data.total}).addCase(getCourseEnrollment.fulfilled,(l,a)=>{l.enrollments=a.payload.data})}});const K=()=>{var x;const{dispatch:n}=O,{courseId:l}=R(),{selectedCourse:a,courses:G}=h(e=>e.course),{userDetails:r}=h(e=>e.auth),{initiatePayment:u,razorpayDivRef:z}=k(),[E,o]=c.useState(!1),[d,f]=c.useState(!1),{showToast:N}=P(),j=()=>{o(!0),u({useCoins:d,type:D.COURSE,itemId:a==null?void 0:a.id,name:a==null?void 0:a.title,description:a==null?void 0:a.description,user:{name:r.name,email:r.email,contact:r.phone_no||""},onSuccess:e=>{N("Enrollment Success!")}}).finally(()=>o(!1))},b=()=>{o(!0),n(F({course:l}))};c.useEffect(()=>{l&&g()},[l]);const g=()=>{n(S({id:l}))},{rating:m,views:y,videos:Y,duration:q}=M(a);return s.jsxs("div",{children:[s.jsxs("div",{className:"bg-[#313131] w-full h-120 p-5 ",children:[s.jsxs("div",{className:"my-4 flex ",children:[s.jsx("div",{className:"w-64  h-auto border-2 rounded-xl border-white border-solid",children:s.jsx("img",{className:" rounded-xl",src:a==null?void 0:a.thumbnail_url,alt:"Course Thumbnail Image"})}),s.jsx("div",{className:"bg-[#313131] flex row-span-2 p-4  text-white",children:s.jsxs("div",{className:"  flex flex-col justify-between ",children:[s.jsx("h3",{className:"text-4xl",children:a==null?void 0:a.title}),s.jsxs("p",{children:["Instructor: ",(x=a==null?void 0:a.tutor)==null?void 0:x.name]}),s.jsxs("p",{children:["Last Updated on ",a==null?void 0:a.updated_at]}),s.jsx("p",{children:"English, Gujarati"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:m}),s.jsx(A,{className:"px-1",value:m,disabled:!0,allowHalf:!0}),s.jsxs("span",{children:["(",y,")"]})]})]})})]}),s.jsxs("div",{className:`bg-[#666666] rounded-xl p-3 ${(a==null?void 0:a.discount)!==0?"h-20":"h-14"} text-white  flex flex-col justify-between`,children:[(a==null?void 0:a.discount)!==0?s.jsxs("p",{className:"text-center",children:[a==null?void 0:a.discount," % discount"]}):"",s.jsxs("p",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"w-5 h-5 bg-white rounded-full relative",children:s.jsx("span",{className:"w-3 h-3 bg-[#FF8F18] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),s.jsxs("span",{children:["₹ ",(a==null?void 0:a.price)*(100-(a==null?void 0:a.discount))/100," Only"]})]}),s.jsxs("span",{className:"bg-[#00B73D] px-2 py-1 rounded-md",children:[(a==null?void 0:a.price)*(a==null?void 0:a.discount)/100," Saved"]})]})]})]}),s.jsxs("div",{className:"p-6 font-bold",children:[s.jsxs("p",{className:"text-2xl flex justify-between items-center",children:[s.jsx("span",{children:"Summary"}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"useCoins",type:"checkbox",value:d,onChange:e=>f(e.target.checked),className:"accent-[#FF6200] h-4 w-4 transform scale-150"}),s.jsx("label",{htmlFor:"useCoins",className:"mx-3 text-xl",children:"Use My Coins"})]})}),s.jsx("button",{onClick:a!=null&&a.is_paid?j:b,disabled:E,className:"border-2 border-black rounded-3xl bg-[#FF8400] px-3 py-1 text-lg",children:a!=null&&a.is_paid?"Purchase Now":"Enroll Now"})]})]}),s.jsxs("p",{className:"text-xl ",children:["Total: ₹ ",(a==null?void 0:a.price)*(100-(a==null?void 0:a.discount))/100]}),s.jsxs("p",{children:["No refunds or credits for partial course periods unless required by law. Your course access begins immediately upon purchase with an initial charge of ₹ ",(a==null?void 0:a.price)*(100-(a==null?void 0:a.discount))/100,'. To avoid additional charges, cancel before the start of any future billing periods. By clicking "Start Course" you agree to our Terms and authorize recurring charges for future access.']})]})]})};export{K as default};
