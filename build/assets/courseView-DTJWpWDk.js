import{r as a,I as R,_ as y,j as e,ag as I,s as S,u as T,e as L,c as O,L as w,af as j,i as V}from"./index-gq12ktLK.js";import{V as B}from"./VideoJs-BH64Eo8o.js";import{T as N}from"./TableContent-DfbA5GTV.js";import{u as z,T as $}from"./Toast-BCn7xGeU.js";import{c as F}from"./actions-CQNwsFBk.js";import{R as _}from"./index-D71NQYPF.js";import"./index-CII06FMK.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},D=function(c,l){return a.createElement(R,y({},c,{ref:l,icon:U}))},P=a.forwardRef(D),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},G=function(c,l){return a.createElement(R,y({},c,{ref:l,icon:A}))},J=a.forwardRef(G);const q=({course:d,module:c})=>{const{dispatch:l}=S,{toasts:r,showToast:n}=z(),[t,i]=a.useState(5),[u,m]=a.useState(""),v=()=>{l(I({review:u,rating:t,course:d,module:c})).unwrap().then(f=>{m(""),i(5),n(f.message,"success")})};return e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("p",{className:"text-2xl p-3 font-bold",children:"Review"}),e.jsx(_,{className:"p-3",value:t,onChange:i,allowHalf:!0}),e.jsx("textarea",{className:"rounded-xl w-full p-4 h-40",placeholder:"Give Review",value:u,onChange:x=>m(x.target.value)}),e.jsx("button",{className:"p-3 m-2 border-2 border-solid rounded-2xl self-end bg-[#FB6000] text-white",type:"submit",onClick:v,children:"Submit Review"}),e.jsx($,{toasts:r})]})},te=()=>{var g;const{dispatch:d}=S,c=T(),{toasts:l}=z(),{courseId:r,moduleId:n}=L(),{selectedCourse:t}=O(o=>o.course),[i,u]=a.useState(1),[m,v]=a.useState([]),[x,f]=a.useState([]),[k,C]=a.useState([]);a.useEffect(()=>{r&&M()},[r]),a.useEffect(()=>{var o;(o=t==null?void 0:t.modules)!=null&&o.length&&(f(t.modules.map(s=>({left:e.jsx(w,{to:`/course/view/${t.id}/module/${s.id}`,children:s.title}),right:j(s.duration)}))),C(t==null?void 0:t.materials.map(s=>({left:e.jsx(w,{to:`/course/view/${t.id}/module/${s.id}`,children:s.title}),right:j(s.duration)}))))},[t]),a.useEffect(()=>{var s;if(!((s=t==null?void 0:t.modules)!=null&&s.length)||!n)return;const o=t.modules.find(h=>h.id===n);o&&v([{src:o.video_url,type:`video/${o.video_url.split(".").pop()}`}])},[t,n]);const M=()=>{d(V({id:r}))},E=()=>{var h;d(F({course:r,module:n}));const s=t.modules.findIndex(b=>b.id===n);if(s&&s<((h=t==null?void 0:t.modules)==null?void 0:h.length)){const b=t.modules[s];c(`/course/view/${t.id}/module/${b.id}`)}},[p,H]=a.useState(!0);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mx-auto relative",children:[e.jsx(B,{sources:m,onEnd:E}),e.jsx("button",{className:"absolute top-3 right-2 z-20  text-white p-2 rounded-full shadow-md",onClick:()=>H(!p),children:p?e.jsx(P,{className:"text-xl"}):e.jsx(J,{className:"text-xl"})}),e.jsxs("div",{className:`absolute top-0 right-0 z-10 text-white bg-black bg-opacity-25 w-72 h-full p-4 rounded-lg shadow-lg transition-transform duration-300 ${p?"translate-x-0 ":"translate-x-[20rem]"}`,children:[e.jsx("div",{className:"flex justify-center items-center relative",children:e.jsx("p",{className:"font-bold text-lg",children:"Course Content"})}),e.jsx("div",{className:"overflow-y-auto hide-scrollbar max-h-[85vh] mt-4",children:(g=t==null?void 0:t.modules)==null?void 0:g.map(o=>e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-2 border-b border-white/30",children:[e.jsx("p",{className:"whitespace-normal break-words flex-1",children:o.title}),e.jsx("input",{disabled:!0,checked:o==null?void 0:o.progress.length,type:"checkbox",className:"form-checkbox w-4 h-4 text-orange-500"})]},o.id))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex space-x-4 mb-6",children:["Course Content","Review","Notes"].map((o,s)=>e.jsx("button",{onClick:()=>u(s+1),className:`px-4 py-2 rounded-3xl ${i===s+1?"bg-[#FB6000] text-white":"hover:bg-gray-100"}`,children:o},s))}),e.jsxs("div",{children:[i===1&&e.jsx(N,{title:"Content",content:x}),i===2&&e.jsx(q,{course:r,module:n}),i===3&&e.jsx(N,{title:"Notes",content:k})]})]}),e.jsx($,{toasts:l})]})};export{te as default};
