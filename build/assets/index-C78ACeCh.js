import{r as i,I as S,_ as k,e as v,d as w,j as s,u as G,aJ as Y,aK as H,a as X,A as j,aL as z,aM as J,s as K}from"./index-DVTEx8d8.js";import{N as V,B as U}from"./BookComponent-DUI5AWit.js";import{C as q,u as Q}from"./courseComponent-DSNv_D9M.js";import{R as W}from"./index-D9wy4rVN.js";import{R as Z}from"./SearchOutlined-CWkHhMaz.js";var p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},D=function(n,a){return i.createElement(S,k({},n,{ref:a,icon:p}))},ss=i.forwardRef(D);const es=({showFilter:e,selectedCategory:n,setSelectedCategory:a,setSelectedStandard:r,selectedStandard:d,selectedSortBy:h,setSelectedSortBy:c})=>{const{categories:u}=v(l=>l.category),{standards:m}=v(l=>l.standard),{theme:t}=w();return s.jsx("div",{className:`lg:w-2/12 w-8/12 ${e?"lg:relative absolute z-10":"hidden"}`,children:s.jsxs("div",{className:`mx-3 p-4 shadow-lg rounded-xl bg-white  flex flex-col overflow-y-auto max-h-[33rem] hide-scrollbar
      ${t.PRIMARY_BORDER}  `,children:[s.jsx("div",{className:`font-bold text-2xl mb-4 underline underline-offset-2  ${t.PRIMARY_TEXT} select-none`,children:"Filters"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT}  select-none`,children:"Categories"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>a(null),children:[s.jsx("input",{type:"radio",id:"category",name:"category",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!n,onChange:()=>a(null)}),s.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer ",children:"All"})]}),[...u].map((l,o)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>a(l.category),children:[s.jsx("input",{type:"radio",id:`category-${o}`,name:"category",value:l.category,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:n===l.category,onChange:()=>a(l.category)}),s.jsx("label",{htmlFor:`category-${o}`,className:"text-sm cursor-pointer ",children:l.category})]},o))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Standards"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>r(null),children:[s.jsx("input",{type:"radio",id:"standard",name:"standard",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!d,onChange:()=>r(null)}),s.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer ",children:"All"})]}),[...m].map((l,o)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>r(l.standard),children:[s.jsx("input",{type:"radio",id:`standard-${o}`,name:"standard",value:l.standard,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:d===l.standard,onChange:()=>r(l.standard)}),s.jsx("label",{htmlFor:`standard-${o}`,className:"text-sm cursor-pointer ",children:l.standard})]},o))]})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Sort By"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(null),children:[s.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!h,onChange:()=>c(null)}),s.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer ",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((l,o)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(l),children:[s.jsx("input",{type:"radio",id:`SortBy-${o}`,name:"SortBy",value:l,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:h===l,onChange:()=>c(l)}),s.jsx("label",{htmlFor:`SortBy-${o}`,className:"text-sm cursor-pointer ",children:l})]},o))]})]})]})})},ts=({paper:e,className:n})=>{const a=G(),r=u=>{a(`/papers/purchase/${u}`)},{theme:d}=w(),{rating:h,views:c}=Y(e);return s.jsx("div",{className:`flex flex-col w-full shadow-md cursor-pointer rounded-xl h-full ${d.PRIMARY_BORDER} p-2 justify-between ${n}`,onClick:()=>r(e.id),children:s.jsxs("div",{className:"flex md:flex-row flex-col h-full gap-2",children:[s.jsx("div",{className:`${e!=null&&e.thumbnail_url?"md:max-w-1/3 w-full":"md:hidden w-full md:h-0 h-96"} md:flex-1 flex-shrink-0   md:h-full  rounded-xl overflow-hidden flex my-auto`,children:e!=null&&e.thumbnail_url?s.jsx("img",{src:e.thumbnail_url,alt:e.title,className:"object-contain w-full"}):s.jsx("div",{className:"flex items-center justify-center h-full p-2 text-center text-gray-500 break-words text-sm",children:e.title})}),s.jsxs("div",{className:"flex flex-col flex-1 h-full justify-between",children:[s.jsxs("div",{className:"flex flex-col flex-grow gap-2 p-3 text-gray-600",children:[s.jsx("h2",{className:"font-bold lg:text-xl md:text-base text-sm text-black line-clamp-3 break-all",children:e==null?void 0:e.title}),s.jsx("p",{className:"italic line-clamp-3 lg:text-md md:text-sm text-xs",children:e==null?void 0:e.description}),s.jsxs("div",{className:"flex items-center text-sm mt-auto",children:[s.jsx("span",{children:h}),s.jsx(W,{className:"px-1",value:h,disabled:!0,allowHalf:!0}),s.jsxs("span",{children:["(",c,")"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center lg:p-3 p-2 border-t",children:[s.jsx("div",{children:e!=null&&e.is_paid&&JSON.parse(e==null?void 0:e.is_paid)?s.jsxs("span",{className:"lg:text-xl md:text-base text-sm font-semibold",children:["₹",e!=null&&e.discount&&(e==null?void 0:e.discount)>0?s.jsxs(s.Fragment,{children:[(e==null?void 0:e.amount)*(100-(e==null?void 0:e.discount))/100," ",s.jsxs("span",{className:"line-through font-medium md:text-base text-xs text-gray-500",children:["₹",e==null?void 0:e.amount]})]}):e==null?void 0:e.amount]}):"Free"}),s.jsx("button",{className:`${d.COLOR_BUTTON} lg:text-md md:text-base text-xs`,children:"View Details"})]})]})]})})},ls=({isCourse:e,isNote:n,isBook:a,isPaper:r,setPage:d,totalData:h,renderData:c})=>{const u=i.useRef(null);return i.useEffect(()=>{const m=()=>{const l=u.current;l&&l.scrollTop+l.clientHeight>=l.scrollHeight-50&&(c==null?void 0:c.length)<h&&d(y=>y+1)},t=u.current;return t&&t.addEventListener("scroll",m),()=>{t&&t.removeEventListener("scroll",m)}},[d,n,e,h,c==null?void 0:c.length]),s.jsxs("div",{ref:u,className:" w-full max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[e&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-2",children:[...c].map((m,t)=>s.jsx(q,{course:m,className:"bg-white/50 border border-gray-200"},t))}),n&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((m,t)=>s.jsx(V,{material:m,className:"bg-white/50 border border-gray-200"},t))}),a&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((m,t)=>s.jsx(U,{book:m,className:"bg-white/50 border border-gray-200"},t))}),r&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((m,t)=>s.jsx(ts,{paper:m,className:"bg-white/50 border border-gray-200"},t))})]})},cs=({isCourse:e,isNote:n,isBook:a,isPaper:r,setSearch:d})=>{const{theme:h}=w();return s.jsx("div",{className:"p-3 relative h-fit w-8/12 flex  whitespace-nowrap justify-center items-center ",children:s.jsxs("div",{className:"relative w-full ",children:[s.jsx("input",{id:"search",className:"pl-5 pr-14 border-2 border-solid text-black border-white focus-visible:border-white rounded-full py-3 px-3 w-full placeholder-gray-500 shadow-2xl",placeholder:`Search  ${e?"Courses":""}${n?"Notes":""}${a?"Books":""}${r?"Papers":""}`,onChange:c=>{d(c.target.value)}}),s.jsx(Z,{className:`text-2xl absolute right-4 p-2 rounded-full top-1.5 ${h.PRIMARY_BG} text-white`})]})})},ms=({isCourse:e=!1,isNote:n=!1,isBook:a=!1,isPaper:r=!1})=>{const[d]=H(),{categories:h}=v(x=>x.category),{standards:c}=v(x=>x.standard);X();const{theme:u}=w(),{dispatch:m}=K,[t,l]=i.useState(null),[o,y]=i.useState(null),[R,A]=i.useState(null),[_,L]=i.useState({}),[P,T]=i.useState(!1),[I,$]=i.useState([]),[F,M]=i.useState(),[C,E]=i.useState(1),[O,B]=i.useState(""),{data:g,isLoading:as}=Q({queryKey:e?j.GET_ALL_COURSE:n?j.GET_ALL_MATERIAL:a?j.GET_ALL_BOOK:r?j.GET_ALL_PAPER:"",endpoint:e?j.GET_ALL_COURSE:n?j.GET_ALL_MATERIAL:a?j.GET_ALL_BOOK:r?j.GET_ALL_PAPER:()=>{},params:{page:C,limit:20,..._},options:{staleTime:1e3*60*5,cacheTime:1e3*60*10,refetchOnWindowFocus:!0}});return i.useEffect(()=>{var N,f;const x=Array.isArray((N=g==null?void 0:g.data)==null?void 0:N.data)?g.data.data:[];$(b=>[...b,...x]),M((f=g==null?void 0:g.data)==null?void 0:f.total)},[g]),i.useEffect(()=>{const x=d.get("category")||null,N=d.get("standard")||null,f=d.get("sortby")||null;l(x),y(N),A(f)},[d]),i.useEffect(()=>{const x={};if(t){const f=h.find(b=>b.category===t);f&&(x.category=f.id)}if(o){const f=c.find(b=>b.standard===o);f&&(x.standard=f.id)}R&&(x.sortby=R),JSON.stringify(x)!==JSON.stringify(_)&&(E(1),m(z()),m(J()),L(x))},[t,o,R]),i.useEffect(()=>()=>{E(1),$([])},[O,_]),s.jsxs("div",{children:[s.jsx("h1",{className:`text-3xl font-bold text-center ${u.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${e?"Courses":""}${n?"Notes":""}${a?"Books":""}${r?"Papers":""}`}),s.jsxs("div",{className:"flex  gap-2 justify-center items-center w-full",children:[s.jsx("p",{className:`text-xl font-bold text-center ${u.PRIMARY_TEXT}  `,children:"Filter"}),s.jsx("button",{className:`${u.PRIMARY_BG} p-3 rounded-full text-white shadow-lg w-10 h-10 flex justify-center items-center`,onClick:()=>T(x=>!x),"aria-label":"Open filter",children:s.jsx(ss,{style:{fontSize:"24px"}})}),s.jsx(cs,{isCourse:e,isNote:n,isBook:a,isPaper:r,setSearch:B})]}),s.jsxs("div",{className:"flex m-4 h-[33rem]",children:[s.jsx(es,{showFilter:P,selectedCategory:t,selectedSortBy:R,selectedStandard:o,setSelectedCategory:l,setSelectedSortBy:A,setSelectedStandard:y}),s.jsx(ls,{isCourse:e,isNote:n,isBook:a,isPaper:r,setPage:E,renderData:I,totalData:F})]})]})};export{ms as P};
