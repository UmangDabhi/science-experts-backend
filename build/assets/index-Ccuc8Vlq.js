import{d as p,j as e,r as d,h as C,aH as R,a as k,k as A,f as L,aI as w,aJ as S,s as M}from"./index-JjPhpDDT.js";import{u as T}from"./usePagination-DyUZ14cW.js";import{N as H}from"./NoteComponent-DmWbg05b.js";import{C as O}from"./courseComponent-DkHcvSq1.js";import{R as I}from"./SearchOutlined-DIu3R5qk.js";const D=({selectedCategory:l,setSelectedCategory:c,setSelectedStandard:o,selectedStandard:i,selectedSortBy:t,setSelectedSortBy:g})=>{const{categories:n}=p(s=>s.category),{standards:h}=p(s=>s.standard);return e.jsx("div",{className:"w-3/12 ",children:e.jsxs("div",{className:"mx-3 p-3 shadow-lg rounded-xl bg-white/50 border border-gray-200",children:[e.jsx("div",{className:"font-bold text-3xl",children:"Filters"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xl my-2",children:"Categories"}),e.jsxs("ul",{className:"space-y-2 max-h-40 overscroll-y-scroll hide-scrollbar",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"category",name:"category",className:"accent-blue-600",checked:!l,onChange:()=>c(null)}),e.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer",children:"All"})]}),[...n].map((s,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`category-${a}`,name:"category",value:s.category,className:"accent-blue-600",checked:l===s.category,onChange:()=>c(s.category)}),e.jsx("label",{htmlFor:`category-${a}`,className:"text-sm cursor-pointer",children:s.category})]},a))]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xl my-2",children:"Standards"}),e.jsxs("ul",{className:"space-y-2 max-h-40 overscroll-y-scroll hide-scrollbar",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"standard",name:"standard",className:"accent-blue-600",checked:!i,onChange:()=>o(null)}),e.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer",children:"All"})]}),[...h].map((s,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`standard-${a}`,name:"standard",value:s.standard,className:"accent-blue-600",checked:i===s.standard,onChange:()=>o(s.standard)}),e.jsx("label",{htmlFor:`standard-${a}`,className:"text-sm cursor-pointer",children:s.standard})]},a))]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xl my-2",children:"Sort By"}),e.jsxs("ul",{className:"space-y-2 max-h-40 overscroll-y-scroll hide-scrollbar",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:"accent-blue-600",checked:!t,onChange:()=>g(null)}),e.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((s,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`SortBy-${a}`,name:"SortBy",value:s,className:"accent-blue-600",checked:t===s,onChange:()=>g(s)}),e.jsx("label",{htmlFor:`SortBy-${a}`,className:"text-sm cursor-pointer",children:s})]},a))]})]})]})})},J=({isCourse:l,isNote:c,setPage:o})=>{const i=d.useRef(null),{materials:t,totalMaterials:g}=p(s=>s.material),{courses:n,totalCourses:h}=p(s=>s.course);return d.useEffect(()=>{const s=()=>{const m=i.current;m&&m.scrollTop+m.clientHeight>=m.scrollHeight-50&&(c?(t==null?void 0:t.length)<g&&o(x=>x+1):l&&(n==null?void 0:n.length)<h&&o(x=>x+1))},a=i.current;return a&&a.addEventListener("scroll",s),()=>{a&&a.removeEventListener("scroll",s)}},[o,c,l,t==null?void 0:t.length,g,n==null?void 0:n.length,h]),e.jsxs("div",{ref:i,className:"w-9/12 max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[l&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:n==null?void 0:n.map((s,a)=>e.jsx(O,{course:s,className:"bg-white/50 border border-gray-200"},a))}),c&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:t==null?void 0:t.map((s,a)=>e.jsx(H,{material:s,className:"bg-white/50 border border-gray-200"},a))})]})},Y=({isCourse:l,isNote:c,setSearch:o})=>{const{theme:i}=C();return e.jsx("div",{className:"p-3 relative h-fit w-full flex  whitespace-nowrap justify-center items-center ",children:e.jsxs("div",{className:"relative w-4/6 ",children:[e.jsx("input",{id:"search",className:"pl-5 pr-14 border-2 border-solid text-black border-white focus-visible:border-white rounded-full py-3 px-3 w-full placeholder-gray-500 shadow-2xl",placeholder:`Search  ${l?"Courses":""} ${c?"Notes":""}`,onChange:t=>o(t.target.value)}),e.jsx(I,{className:`text-2xl absolute right-4 p-2 rounded-full top-1.5 ${i.PRIMARY_BG} text-white`})]})})},U=({isCourse:l=!1,isNote:c=!1})=>{const[o]=R(),{categories:i}=p(r=>r.category),{standards:t}=p(r=>r.standard),{showToast:g}=k(),{theme:n}=C(),{dispatch:h}=M,[s,a]=d.useState(null),[m,f]=d.useState(null),[x,N]=d.useState(null),[y,$]=d.useState({}),{page:B,setPage:b,limit:_,setLimit:G,search:E,setSearch:P,fetchData:F}=T(l?A:c?L:()=>{},y,r=>{},r=>g(r,"error"));return d.useEffect(()=>{const r=o.get("category")||null,v=o.get("standard")||null,u=o.get("sortby")||null;a(r),f(v),N(u)},[o]),d.useEffect(()=>{const r={};if(s){const u=i.find(j=>j.category===s);u&&(r.category=u.id)}if(m){const u=t.find(j=>j.standard===m);u&&(r.standard=u.id)}x&&(r.sortby=x),JSON.stringify(r)!==JSON.stringify(y)&&(b(1),h(w()),h(S()),$(r))},[s,m,x]),d.useEffect(()=>{F()},[y,B,E]),d.useEffect(()=>()=>{h(w()),h(S())},[]),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold text-center ${n.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${l?"Courses":""} ${c?"Notes":""}`}),e.jsx(Y,{isCourse:l,isNote:c,setSearch:P}),e.jsxs("div",{className:"flex m-4",children:[e.jsx(D,{selectedCategory:s,selectedSortBy:x,selectedStandard:m,setSelectedCategory:a,setSelectedSortBy:N,setSelectedStandard:f}),e.jsx(J,{isCourse:l,isNote:c,setPage:b})]})]})};export{U as P};
