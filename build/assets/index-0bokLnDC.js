import{r,I as B,_ as C,e as N,d as A,j as e,aH as O,a as Y,A as g,aI as G,aJ as k,s as H}from"./index-Cbji9Z_j.js";import{N as X,B as z}from"./BookComponent-TKKbg3gA.js";import{C as J,u as K}from"./courseComponent-Cwx6f6Rt.js";import{R as V}from"./SearchOutlined-IbJiuxN3.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},q=function(n,c){return r.createElement(B,C({},n,{ref:c,icon:U}))},Q=r.forwardRef(q);const W=({showFilter:m,selectedCategory:n,setSelectedCategory:c,setSelectedStandard:d,selectedStandard:x,selectedSortBy:a,setSelectedSortBy:u})=>{const{categories:h}=N(s=>s.category),{standards:l}=N(s=>s.standard),{theme:t}=A();return e.jsx("div",{className:`lg:w-2/12 w-8/12 ${m?"lg:relative absolute z-10":"hidden"}`,children:e.jsxs("div",{className:`mx-3 p-4 shadow-lg rounded-xl bg-white  flex flex-col overflow-y-auto max-h-[33rem] hide-scrollbar
      ${t.PRIMARY_BORDER}  `,children:[e.jsx("div",{className:`font-bold text-2xl mb-4 underline underline-offset-2  ${t.PRIMARY_TEXT} select-none`,children:"Filters"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT}  select-none`,children:"Categories"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(null),children:[e.jsx("input",{type:"radio",id:"category",name:"category",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!n,onChange:()=>c(null)}),e.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer ",children:"All"})]}),[...h].map((s,o)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(s.category),children:[e.jsx("input",{type:"radio",id:`category-${o}`,name:"category",value:s.category,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:n===s.category,onChange:()=>c(s.category)}),e.jsx("label",{htmlFor:`category-${o}`,className:"text-sm cursor-pointer ",children:s.category})]},o))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Standards"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>d(null),children:[e.jsx("input",{type:"radio",id:"standard",name:"standard",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!x,onChange:()=>d(null)}),e.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer ",children:"All"})]}),[...l].map((s,o)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>d(s.standard),children:[e.jsx("input",{type:"radio",id:`standard-${o}`,name:"standard",value:s.standard,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:x===s.standard,onChange:()=>d(s.standard)}),e.jsx("label",{htmlFor:`standard-${o}`,className:"text-sm cursor-pointer ",children:s.standard})]},o))]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Sort By"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>u(null),children:[e.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!a,onChange:()=>u(null)}),e.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer ",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((s,o)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>u(s),children:[e.jsx("input",{type:"radio",id:`SortBy-${o}`,name:"SortBy",value:s,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:a===s,onChange:()=>u(s)}),e.jsx("label",{htmlFor:`SortBy-${o}`,className:"text-sm cursor-pointer ",children:s})]},o))]})]})]})})},Z=({isCourse:m,isNote:n,isBook:c,setPage:d,totalData:x,renderData:a})=>{const u=r.useRef(null);return r.useEffect(()=>{const h=()=>{const t=u.current;t&&t.scrollTop+t.clientHeight>=t.scrollHeight-50&&(a==null?void 0:a.length)<x&&d(o=>o+1)},l=u.current;return l&&l.addEventListener("scroll",h),()=>{l&&l.removeEventListener("scroll",h)}},[d,n,m,x,a==null?void 0:a.length]),e.jsxs("div",{ref:u,className:" w-full max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[m&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-2",children:[...a].map((h,l)=>e.jsx(J,{course:h,className:"bg-white/50 border border-gray-200"},l))}),n&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:a==null?void 0:a.map((h,l)=>e.jsx(X,{material:h,className:"bg-white/50 border border-gray-200"},l))}),c&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:a==null?void 0:a.map((h,l)=>e.jsx(z,{book:h,className:"bg-white/50 border border-gray-200"},l))})]})},D=({isCourse:m,isNote:n,isBook:c,setSearch:d})=>{const{theme:x}=A();return e.jsx("div",{className:"p-3 relative h-fit w-8/12 flex  whitespace-nowrap justify-center items-center ",children:e.jsxs("div",{className:"relative w-full ",children:[e.jsx("input",{id:"search",className:"pl-5 pr-14 border-2 border-solid text-black border-white focus-visible:border-white rounded-full py-3 px-3 w-full placeholder-gray-500 shadow-2xl",placeholder:`Search  ${m?"Courses":""}${n?"Notes":""}${c?"Books":""}`,onChange:a=>{d(a.target.value)}}),e.jsx(V,{className:`text-2xl absolute right-4 p-2 rounded-full top-1.5 ${x.PRIMARY_BG} text-white`})]})})},re=({isCourse:m=!1,isNote:n=!1,isBook:c=!1})=>{const[d]=O(),{categories:x}=N(i=>i.category),{standards:a}=N(i=>i.standard);Y();const{theme:u}=A(),{dispatch:h}=H,[l,t]=r.useState(null),[s,o]=r.useState(null),[R,v]=r.useState(null),[b,$]=r.useState({}),[w,I]=r.useState(!1),[L,_]=r.useState([]),[T,P]=r.useState(),[F,E]=r.useState(1),[M,S]=r.useState(""),{data:f,isLoading:ee}=K({queryKey:m?g.GET_ALL_COURSE:n?g.GET_ALL_MATERIAL:c?g.GET_ALL_BOOK:"",endpoint:m?g.GET_ALL_COURSE:n?g.GET_ALL_MATERIAL:c?g.GET_ALL_BOOK:()=>{},params:{page:F,limit:20,...b},options:{staleTime:1e3*60*5,cacheTime:1e3*60*10,refetchOnWindowFocus:!0}});return r.useEffect(()=>{var j,p;const i=Array.isArray((j=f==null?void 0:f.data)==null?void 0:j.data)?f.data.data:[];_(y=>[...y,...i]),P((p=f==null?void 0:f.data)==null?void 0:p.total)},[f]),r.useEffect(()=>{const i=d.get("category")||null,j=d.get("standard")||null,p=d.get("sortby")||null;t(i),o(j),v(p)},[d]),r.useEffect(()=>{const i={};if(l){const p=x.find(y=>y.category===l);p&&(i.category=p.id)}if(s){const p=a.find(y=>y.standard===s);p&&(i.standard=p.id)}R&&(i.sortby=R),JSON.stringify(i)!==JSON.stringify(b)&&(E(1),h(G()),h(k()),$(i))},[l,s,R]),r.useEffect(()=>()=>{E(1),_([])},[M,b]),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold text-center ${u.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${m?"Courses":""}${n?"Notes":""}${c?"Books":""}`}),e.jsxs("div",{className:"flex  gap-2 justify-center items-center w-full",children:[e.jsx("p",{className:`text-xl font-bold text-center ${u.PRIMARY_TEXT}  `,children:"Filter"}),e.jsx("button",{className:`${u.PRIMARY_BG} p-3 rounded-full text-white shadow-lg w-10 h-10 flex justify-center items-center`,onClick:()=>I(i=>!i),"aria-label":"Open filter",children:e.jsx(Q,{style:{fontSize:"24px"}})}),e.jsx(D,{isCourse:m,isNote:n,isBook:c,setSearch:S})]}),e.jsxs("div",{className:"flex m-4 h-[33rem]",children:[e.jsx(W,{showFilter:w,selectedCategory:l,selectedSortBy:R,selectedStandard:s,setSelectedCategory:t,setSelectedSortBy:v,setSelectedStandard:o}),e.jsx(Z,{isCourse:m,isNote:n,isBook:c,setPage:E,renderData:L,totalData:T})]})]})};export{re as P};
