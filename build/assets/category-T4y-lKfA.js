import{f as I,a as P,e as $,r as l,j as t,N as B,ab as f,ac as L,ad as _,ae as q,af as C,s as z}from"./index-D88zQRRN.js";import{D as U}from"./DynamicForm-CJyhLITx.js";import{A as V,R as X}from"./ActionButtons-tmNCtmSM.js";import{u as b,C as j}from"./useModal-CEw5WwZ2.js";import{A as Y}from"./AntdTable-er-Brw5z.js";import{u as G}from"./usePagination-DjVvkvTY.js";import{S as H}from"./Search-Bscox-sw.js";import{R as J}from"./EditOutlined-B0f4Nu4K.js";import"./index-DcCxWgkX.js";import"./ContextIsolator-D3jvgf_M.js";import"./index-B7XrKtQs.js";import"./CloseCircleFilled-pnbKNdw8.js";import"./CheckOutlined-i7SGZPHD.js";import"./SearchOutlined-oUtRwnoY.js";const de=()=>{const{dispatch:s}=z,{categories:M,totalCategories:w,selectedCategory:o}=I(e=>e.category),{showToast:r}=P(),{isOpen:O,openModal:g,closeModal:E}=b(),{isOpen:A,openModal:R,closeModal:i}=b(),{theme:u}=$(),n=l.useRef(),{page:p,setPage:h,limit:y,setLimit:k,search:x,setSearch:D,fetchData:c}=G(B,{},e=>{},e=>r(e,"error"));l.useEffect(()=>{c()},[p,y,x]),l.useEffect(()=>{h(1)},[x]);const T=(e,a)=>{h(e),k(a)},v=[{title:"Category Name",dataIndex:"category",key:"category"},{title:"Action",key:"action",render:(e,a)=>t.jsx(V,{buttons:[{text:"Edit",onClick:()=>{s(f(a)),g()},icon:J,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{R(),s(f(a))},icon:X,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}],N=[Object.keys(o).length&&{name:"id",label:"id",type:"hidden"},{name:"category",label:"Category Name",type:"text",inputClass:"input-class",required:!0}],S=e=>{const a=Object.keys(o).length?L:_;s(a(e)).unwrap().then(m=>{d(),c(),r(m.message,"success")}).catch(m=>{d(),r(m,"error")})},F=()=>{s(q(o)).unwrap().then(e=>{i(),c(),s(C()),r(e.message,"success")}).catch(e=>{i(),r(e,"error")})};l.useEffect(()=>{n.current&&o&&n.current.resetForm({...o})},[o]);const d=()=>{E(),n.current.resetForm({category:null}),s(C())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2",children:[t.jsx("h1",{className:`text-2xl font-bold text-center ${u.PRIMARY_TEXT}`,children:"Category Management"}),t.jsxs("div",{className:"flex items-center w-1/3",children:[t.jsx(H,{displayText:"Category",setSearch:D}),t.jsx("button",{onClick:g,className:`${u.COLOR_BUTTON} text-white  font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Category"})]})]}),t.jsx(Y,{columns:v,dataSource:M,current:p,pageSize:y,total:w,onChange:T}),t.jsx(j,{title:Object.keys(o).length?"Edit Category":"Add Category",isOpen:O,onCancel:d,footer:null,children:t.jsx(U,{ref:n,formConfig:N,onSubmit:S,initialValues:o,formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] hover:bg-[#FF0000] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(j,{title:"Confirm Deletion",isOpen:A,onCancel:i,onOk:F,children:t.jsx("p",{children:"Are you sure you want to delete this category?"})})]})};export{de as default};
