var ft=t=>{throw TypeError(t)};var X=(t,e,s)=>e.has(t)||ft("Cannot "+s);var i=(t,e,s)=>(X(t,e,"read from private field"),s?s.call(t):e.get(t)),x=(t,e,s)=>e.has(t)?ft("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),c=(t,e,s,a)=>(X(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),p=(t,e,s)=>(X(t,e,"access private method"),s);import{aN as Ot,aO as pt,aP as w,aQ as Z,aR as q,aS as G,aT as tt,aU as mt,aV as jt,aW as St,aX as Et,aY as xt,aZ as Rt,r as j,a_ as Qt,a$ as It,au as Tt,at as Ft,u as Nt,al as _t,d as Ut,j as o}from"./index-CdY-0_37.js";import{R as Dt}from"./index-CWHuI35j.js";var g,r,A,b,I,_,S,E,$,U,D,T,F,Q,M,n,H,et,st,it,at,rt,nt,ht,Ct,yt,Mt=(yt=class extends Ot{constructor(e,s){super();x(this,n);x(this,g);x(this,r);x(this,A);x(this,b);x(this,I);x(this,_);x(this,S);x(this,E);x(this,$);x(this,U);x(this,D);x(this,T);x(this,F);x(this,Q);x(this,M,new Set);this.options=s,c(this,g,e),c(this,E,null),c(this,S,pt()),this.options.experimental_prefetchInRender||i(this,S).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,r).addObserver(this),bt(i(this,r),this.options)?p(this,n,H).call(this):this.updateResult(),p(this,n,at).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lt(i(this,r),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lt(i(this,r),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,n,rt).call(this),p(this,n,nt).call(this),i(this,r).removeObserver(this)}setOptions(e){const s=this.options,a=i(this,r);if(this.options=i(this,g).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,i(this,r))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,n,ht).call(this),i(this,r).setOptions(this.options),s._defaulted&&!Z(this.options,s)&&i(this,g).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,r),observer:this});const u=this.hasListeners();u&&gt(i(this,r),a,this.options,s)&&p(this,n,H).call(this),this.updateResult(),u&&(i(this,r)!==a||w(this.options.enabled,i(this,r))!==w(s.enabled,i(this,r))||q(this.options.staleTime,i(this,r))!==q(s.staleTime,i(this,r)))&&p(this,n,et).call(this);const l=p(this,n,st).call(this);u&&(i(this,r)!==a||w(this.options.enabled,i(this,r))!==w(s.enabled,i(this,r))||l!==i(this,Q))&&p(this,n,it).call(this,l)}getOptimisticResult(e){const s=i(this,g).getQueryCache().build(i(this,g),e),a=this.createResult(s,e);return kt(this,a)&&(c(this,b,a),c(this,_,this.options),c(this,I,i(this,r).state)),a}getCurrentResult(){return i(this,b)}trackResult(e,s){return new Proxy(e,{get:(a,u)=>(this.trackProp(u),s==null||s(u),Reflect.get(a,u))})}trackProp(e){i(this,M).add(e)}getCurrentQuery(){return i(this,r)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,g).defaultQueryOptions(e),a=i(this,g).getQueryCache().build(i(this,g),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return p(this,n,H).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,b)))}createResult(e,s){var dt;const a=i(this,r),u=this.options,l=i(this,b),h=i(this,I),O=i(this,_),v=e!==a?e.state:i(this,A),{state:P}=e;let d={...P},k=!1,m;if(s._optimisticResults){const R=this.hasListeners(),W=!R&&bt(e,s),N=R&&gt(e,a,s,u);(W||N)&&(d={...d,...Et(P.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:L,errorUpdatedAt:B,status:y}=d;m=d.data;let V=!1;if(s.placeholderData!==void 0&&m===void 0&&y==="pending"){let R;l!=null&&l.isPlaceholderData&&s.placeholderData===(O==null?void 0:O.placeholderData)?(R=l.data,V=!0):R=typeof s.placeholderData=="function"?s.placeholderData((dt=i(this,D))==null?void 0:dt.state.data,i(this,D)):s.placeholderData,R!==void 0&&(y="success",m=xt(l==null?void 0:l.data,R,s),k=!0)}if(s.select&&m!==void 0&&!V)if(l&&m===(h==null?void 0:h.data)&&s.select===i(this,$))m=i(this,U);else try{c(this,$,s.select),m=s.select(m),m=xt(l==null?void 0:l.data,m,s),c(this,U,m),c(this,E,null)}catch(R){c(this,E,R)}i(this,E)&&(L=i(this,E),m=i(this,U),B=Date.now(),y="error");const K=d.fetchStatus==="fetching",Y=y==="pending",J=y==="error",ct=Y&&K,ut=m!==void 0,C={status:y,fetchStatus:d.fetchStatus,isPending:Y,isSuccess:y==="success",isError:J,isInitialLoading:ct,isLoading:ct,data:m,dataUpdatedAt:d.dataUpdatedAt,error:L,errorUpdatedAt:B,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>v.dataUpdateCount||d.errorUpdateCount>v.errorUpdateCount,isFetching:K,isRefetching:K&&!Y,isLoadingError:J&&!ut,isPaused:d.fetchStatus==="paused",isPlaceholderData:k,isRefetchError:J&&ut,isStale:ot(e,s),refetch:this.refetch,promise:i(this,S)};if(this.options.experimental_prefetchInRender){const R=z=>{C.status==="error"?z.reject(C.error):C.data!==void 0&&z.resolve(C.data)},W=()=>{const z=c(this,S,C.promise=pt());R(z)},N=i(this,S);switch(N.status){case"pending":e.queryHash===a.queryHash&&R(N);break;case"fulfilled":(C.status==="error"||C.data!==N.value)&&W();break;case"rejected":(C.status!=="error"||C.error!==N.reason)&&W();break}}return C}updateResult(){const e=i(this,b),s=this.createResult(i(this,r),this.options);if(c(this,I,i(this,r).state),c(this,_,this.options),i(this,I).data!==void 0&&c(this,D,i(this,r)),Z(s,e))return;c(this,b,s);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:u}=this.options,l=typeof u=="function"?u():u;if(l==="all"||!l&&!i(this,M).size)return!0;const h=new Set(l??i(this,M));return this.options.throwOnError&&h.add("error"),Object.keys(i(this,b)).some(O=>{const f=O;return i(this,b)[f]!==e[f]&&h.has(f)})};p(this,n,Ct).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,n,at).call(this)}},g=new WeakMap,r=new WeakMap,A=new WeakMap,b=new WeakMap,I=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,$=new WeakMap,U=new WeakMap,D=new WeakMap,T=new WeakMap,F=new WeakMap,Q=new WeakMap,M=new WeakMap,n=new WeakSet,H=function(e){p(this,n,ht).call(this);let s=i(this,r).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(G)),s},et=function(){p(this,n,rt).call(this);const e=q(this.options.staleTime,i(this,r));if(tt||i(this,b).isStale||!mt(e))return;const a=jt(i(this,b).dataUpdatedAt,e)+1;c(this,T,setTimeout(()=>{i(this,b).isStale||this.updateResult()},a))},st=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,r)):this.options.refetchInterval)??!1},it=function(e){p(this,n,nt).call(this),c(this,Q,e),!(tt||w(this.options.enabled,i(this,r))===!1||!mt(i(this,Q))||i(this,Q)===0)&&c(this,F,setInterval(()=>{(this.options.refetchIntervalInBackground||St.isFocused())&&p(this,n,H).call(this)},i(this,Q)))},at=function(){p(this,n,et).call(this),p(this,n,it).call(this,p(this,n,st).call(this))},rt=function(){i(this,T)&&(clearTimeout(i(this,T)),c(this,T,void 0))},nt=function(){i(this,F)&&(clearInterval(i(this,F)),c(this,F,void 0))},ht=function(){const e=i(this,g).getQueryCache().build(i(this,g),this.options);if(e===i(this,r))return;const s=i(this,r);c(this,r,e),c(this,A,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ct=function(e){Rt.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,b))}),i(this,g).getQueryCache().notify({query:i(this,r),type:"observerResultsUpdated"})})},yt);function Pt(t,e){return w(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function bt(t,e){return Pt(t,e)||t.state.data!==void 0&&lt(t,e,e.refetchOnMount)}function lt(t,e,s){if(w(e.enabled,t)!==!1){const a=typeof s=="function"?s(t):s;return a==="always"||a!==!1&&ot(t,e)}return!1}function gt(t,e,s,a){return(t!==e||w(a.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ot(t,s)}function ot(t,e){return w(e.enabled,t)!==!1&&t.isStaleByTime(q(e.staleTime,t))}function kt(t,e){return!Z(t.getCurrentResult(),e)}var wt=j.createContext(!1),Lt=()=>j.useContext(wt);wt.Provider;function Bt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ht=j.createContext(Bt()),At=()=>j.useContext(Ht),$t=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Vt=t=>{j.useEffect(()=>{t.clearReset()},[t])},Wt=({result:t,errorResetBoundary:e,throwOnError:s,query:a,suspense:u})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(u&&t.data===void 0||Qt(s,[t.error,a])),zt=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},qt=(t,e)=>t.isLoading&&t.isFetching&&!e,Kt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,vt=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Yt(t,e,s){var d,k,m,L,B;const a=It(),u=Lt(),l=At(),h=a.defaultQueryOptions(t);(k=(d=a.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||k.call(d,h),h._optimisticResults=u?"isRestoring":"optimistic",zt(h),$t(h,l),Vt(l);const O=!a.getQueryCache().get(h.queryHash),[f]=j.useState(()=>new e(a,h)),v=f.getOptimisticResult(h),P=!u&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(y=>{const V=P?f.subscribe(Rt.batchCalls(y)):G;return f.updateResult(),V},[f,P]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),j.useEffect(()=>{f.setOptions(h)},[h,f]),Kt(h,v))throw vt(h,f,l);if(Wt({result:v,errorResetBoundary:l,throwOnError:h.throwOnError,query:a.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw v.error;if((L=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||L.call(m,h,v),h.experimental_prefetchInRender&&!tt&&qt(v,u)){const y=O?vt(h,f,l):(B=a.getQueryCache().get(h.queryHash))==null?void 0:B.promise;y==null||y.catch(G).finally(()=>{f.updateResult()})}return h.notifyOnChangeProps?v:f.trackResult(v)}function Jt(t,e){return Yt(t,Mt)}const ee=({queryKey:t,endpoint:e,params:s={},options:a={}})=>Jt({queryKey:[t,s],queryFn:async()=>(await Tt(Ft(e,s))).data,...a}),se=({course:t,className:e})=>{const s=Nt(),{rating:a,views:u,videos:l,duration:h}=_t(t),O=v=>{s(`/course/preview/${v}`)},{theme:f}=Ut();return o.jsx("div",{className:`flex flex-col w-full shadow-md cursor-pointer rounded-xl h-full ${f.PRIMARY_BORDER} p-2 justify-between ${e}`,onClick:()=>O(t.id),children:o.jsxs("div",{className:"flex md:flex-row flex-col h-full gap-2",children:[o.jsx("div",{className:`${t!=null&&t.thumbnail_url?"md:max-w-1/3 w-full":"md:hidden w-full md:h-0 h-96"} md:flex-1 flex-shrink-0 my-auto rounded-xl overflow-hidden`,children:t!=null&&t.thumbnail_url?o.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"object-contain w-full"}):o.jsx("div",{className:"flex items-center justify-center h-full p-2 text-center text-gray-500 break-words text-sm break-all",children:t.title})}),o.jsxs("div",{className:"flex flex-col flex-1 h-full justify-between",children:[o.jsxs("div",{className:"flex flex-col flex-grow gap-2 p-3 text-gray-600",children:[o.jsx("h2",{className:"font-bold lg:text-xl md:text-base text-sm text-black line-clamp-5 pb-1",children:t==null?void 0:t.title}),o.jsx("p",{className:"italic line-clamp-3 lg:text-md md:text-sm text-xs",children:t==null?void 0:t.description}),o.jsxs("div",{className:"flex w-full justify-between",children:[o.jsxs("div",{children:[h," Hours"]}),o.jsxs("div",{children:[l," videos"]}),o.jsx("div",{})]}),o.jsxs("div",{className:"flex items-center text-sm mt-auto",children:[o.jsx("span",{children:a}),o.jsx(Dt,{className:"px-1",value:a,disabled:!0,allowHalf:!0}),o.jsxs("span",{children:["(",u,")"]})]})]}),o.jsxs("div",{className:"flex justify-between items-center lg:p-3 p-2 border-t",children:[o.jsx("div",{children:t!=null&&t.is_paid&&JSON.parse(t==null?void 0:t.is_paid)?o.jsxs("span",{className:"lg:text-xl md:text-base text-sm font-semibold",children:["₹",t!=null&&t.discount&&(t==null?void 0:t.discount)>0?o.jsxs(o.Fragment,{children:[(t==null?void 0:t.price)*(100-(t==null?void 0:t.discount))/100," ",o.jsxs("span",{className:"line-through font-medium md:text-base text-xs text-gray-500",children:["₹",t==null?void 0:t.price]})]}):t==null?void 0:t.price]}):"Free"}),o.jsx("button",{className:`${f.COLOR_BUTTON} lg:text-md md:text-base text-xs`,children:"View Details"})]})]})]})})};export{se as C,ee as u};
