import{v as y,u as M,d as A,a as D,r as T,j as t,Y as k,Z as S,$ as _,a0 as l,a1 as I,s as O}from"./index-CoTZMpDQ.js";import{A as P,R as E}from"./ActionButtons-C_oeuWbx.js";import{u as N,A as L,C as z}from"./useModal-hFaCq62G.js";import{u as B}from"./usePagination-DrexqVq0.js";import{S as Y}from"./index-CsU7jkis.js";import"./index-B-UYQ6pT.js";import"./omit-QKSDMMjA.js";import"./SearchOutlined-fnjF7dbk.js";const V=()=>{const{dispatch:a}=O,{courseId:d}=y();M();const{reviews:m,totalReviews:h,selectedReview:u}=A(e=>e.review),{showToast:o}=D(),{page:w,setPage:x,limit:p,setLimit:v,search:Z,setSearch:$,fetchData:n}=B(k,{courseId:d},e=>{},e=>o(e,"error")),{isOpen:g,openModal:f,closeModal:c}=N();T.useEffect(()=>{n()},[]);const R=[{title:"Review Title",dataIndex:"review",key:"review"},{title:"Change Testimonial",dataIndex:"show_as_testimonials",key:"show_as_testimonials",render:(e,s)=>t.jsx(Y,{checked:e,onChange:i=>b(s,i)})},{title:"Action",key:"action",render:(e,s)=>t.jsx(P,{buttons:[{text:"Delete",onClick:()=>{a(S(s)),f()},icon:E,color:{text:"text-red-600",bg:"bg-red-100",hover:"hover:bg-red-200"}}]})}],j=(e,s)=>{x(e),v(s),n()},C=()=>{a(_(u)).unwrap().then(e=>{c(),n(),a(l()),o(e.message,"success")}).catch(e=>{o(e,"error")})},b=(e,s)=>{const i={...e,show_as_testimonials:s};a(I(i)).unwrap().then(r=>{n(),a(l()),o(r.message,"success")}).catch(r=>{o(r,"error")})};return t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-between items-center my-4 mx-16",children:t.jsx("h1",{className:"text-xl font-bold text-center",children:"Review Management"})}),t.jsx(L,{columns:R,dataSource:m,current:w,pageSize:p,total:h,onChange:j}),t.jsx(z,{title:"Confirm Deletion",isOpen:g,onCancel:c,onOk:C,children:t.jsx("p",{children:"Are you sure you want to delete this Review?"})})]})};export{V as default};
