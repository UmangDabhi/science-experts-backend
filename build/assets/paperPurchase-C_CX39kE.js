import{C as E,f as u,r as o,aH as x,a as S,aU as T,e as L,aV as R,j,s as v}from"./index-BHBvR4s_.js";import{u as I,P as J}from"./useRazorpayPayment-C5jDv7mI.js";import{b as k,P as z}from"./PurchasePreviewComponent-y7HMGb0L.js";import"./actions-D13KjOuA.js";import"./index-C1kapGRz.js";import"./ContextIsolator-r72C00t8.js";import"./index-Crai6NJu.js";import"./index-B3FzYEoF.js";const B=()=>{const{dispatch:p}=v,{paperId:a}=E(),{selectedPaper:s,papers:A}=u(t=>t.paper),{initiatePayment:m,razorpayDivRef:M}=I(),{initiateDownload:f,isLoading:d}=k(),[l,e]=o.useState(!1),[n,P]=o.useState(!1),{openPrompt:i}=x(),{userDetails:r}=u(t=>t.auth),{showToast:h}=S(),D=()=>{if(!r){i();return}e(!0),m({useCoins:n,type:J.PAPER,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:t=>{c(),h("Purchase Success!")}}).finally(()=>e(!1))};o.useEffect(()=>{a&&c()},[a]);const g=(t,C)=>{if(!r){i();return}f(t,C)},c=()=>{p(T({id:a}))};L();const{rating:w,views:y}=R(s);return j.jsx(z,{selectedItem:s,rating:w,views:y,useCoins:n,setUseCoins:P,handlePurchaseClick:D,handleDownloadClick:g,loading:l,downloadLoading:d})};export{B as default};
