import{d as x,r as d,a as b,j as a,w as N,x as C,g as y,s as _}from"./index-CGpXYQek.js";import{D as g}from"./DynamicForm-C8MfD6ne.js";import{C as s}from"./CommonClass-Dpx7ipLY.js";import{u as M}from"./uploadFile-DOVFQiI_.js";const U=()=>{const{dispatch:o}=_,{userDetails:e}=x(r=>r.auth),[l,i]=d.useState(null),t=d.useRef(),{showToast:p}=b();d.useEffect(()=>{if(t.current&&e){const r={id:e.id,name:e.name,email:e.email,phone_no:e.phone_no,secondary_phone_no:e.secondary_phone_no,school:e.school,standard:e.standard,about_me:e.about_me,address:e.address,city:e.city,state:e.state,pincode:e.pincode};t.current.resetForm({...r})}},[e]);const h=async r=>{var u,m;const c=N({...r});if(l){const n=await o(M({file:l,folder:"User/Profile"})).unwrap();c.profile_url=(m=(u=n==null?void 0:n.data)==null?void 0:u.data)==null?void 0:m.s3Url}o(C(c)).unwrap().then(n=>{p(n.message),o(y({id:e.id}))})},f=[{extra:a.jsx(O,{profileImage:e&&e.profile_url?e.profile_url:l,setProfileImage:i}),className:"col-span-12"},{name:"name",label:"Name",type:"text",required:!0,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"email",label:"Email",type:"email",required:!0,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"phone_no",label:"Phone No",type:"number",required:!0,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"secondary_phone_no",label:"Secondary Phone No",type:"number",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"standard",label:"Standard",type:"text",required:!0,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"school",label:"School Name",type:"text",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"about_me",label:"About Me",type:"textarea",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"address",label:"Address",type:"textarea",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-6"},{name:"city",label:"City",type:"text",required:!0,inputClass:s.COMMON_INPUT,columnWidth:"col-span-4"},{name:"state",label:"State",type:"text",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-4"},{name:"pincode",label:"Pincode",type:"number",required:!1,inputClass:s.COMMON_INPUT,columnWidth:"col-span-4"}];return a.jsxs("div",{className:"w-8/12 mx-auto p-6 bg-[#FFDBC4E5] rounded-2xl shadow-formShadow my-10 border border-[#FFA167]",children:[a.jsx("h1",{className:" text-3xl font-bold text-center text-[#FF6200] mb-8",children:"My Profile"}),a.jsx("div",{children:a.jsx(g,{ref:t,formConfig:f,onSubmit:h,gridClass:"grid grid-cols-12  gap-x-6 gap-y-2",formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})})]})},O=({setProfileImage:o,profileImage:e})=>{const l=i=>{const t=i.target.files[0];t&&o(t)};return a.jsx("div",{className:"w-full flex justify-center",children:a.jsxs("div",{className:"relative w-32 h-32",children:[a.jsx("input",{id:"profile-upload",type:"file",accept:".png,.jpg,.jpeg",className:"hidden",onChange:l}),a.jsx("label",{htmlFor:"profile-upload",className:"cursor-pointer",children:e?a.jsx("img",{src:typeof e=="object"?URL.createObjectURL(e):e,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-[#FFA167] shadow-md transition hover:opacity-80"}):a.jsxs("div",{className:"w-32 h-32 rounded-full bg-[#FFDBC4E5] flex flex-col items-center justify-center border-2 border-dashed border-gray-400 text-gray-600 hover:border-blue-500 transition",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-1 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01.88-7.9 6 6 0 0111.23 2.1A4.5 4.5 0 0120 16h-4m-4-4v8m0 0l-3-3m3 3l3-3"})}),a.jsx("p",{className:"text-sm",children:"Upload Photo"})]})})]})})};export{U as default};
