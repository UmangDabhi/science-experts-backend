import{f as P,a as I,e as $,r as l,j as t,P as B,ad as f,ae as L,af as _,ag as q,ah as C,s as z}from"./index-BjdLfJe7.js";import{D as U}from"./DynamicForm-D8J3R9EV.js";import{A as V,R as X}from"./ActionButtons-DGUvjca5.js";import{u as b,C as j}from"./useModal-B5D-OWVy.js";import{A as Y}from"./AntdTable-CrXeoOW6.js";import{u as G}from"./usePagination-B9pxbVtu.js";import{S as H}from"./Search-BCkjphl_.js";import{R as J}from"./EditOutlined-BJu-5aOK.js";import"./index-R1KXR9ez.js";import"./ContextIsolator-BA2Tqdcz.js";import"./index-DzUwBG0D.js";import"./CloseCircleFilled-CtSYVcYj.js";import"./CheckOutlined-BktQFpKq.js";import"./SearchOutlined-fZF6X0kI.js";const de=()=>{const{dispatch:s}=z,{categories:M,totalCategories:w,selectedCategory:o}=P(e=>e.category),{showToast:r}=I(),{isOpen:O,openModal:g,closeModal:E}=b(),{isOpen:A,openModal:R,closeModal:i}=b(),{theme:u}=$(),n=l.useRef(),{page:p,setPage:h,limit:y,setLimit:k,search:x,setSearch:D,fetchData:c}=G(B,{},e=>{},e=>r(e,"error"));l.useEffect(()=>{c()},[p,y,x]),l.useEffect(()=>{h(1)},[x]);const T=(e,a)=>{h(e),k(a)},v=[{title:"Category Name",dataIndex:"category",key:"category"},{title:"Action",key:"action",render:(e,a)=>t.jsx(V,{buttons:[{text:"Edit",onClick:()=>{s(f(a)),g()},icon:J,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{R(),s(f(a))},icon:X,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}],S=[Object.keys(o).length&&{name:"id",label:"id",type:"hidden"},{name:"category",label:"Category Name",type:"text",inputClass:"input-class",required:!0}],F=e=>{const a=Object.keys(o).length?L:_;s(a(e)).unwrap().then(m=>{d(),c(),r(m.message,"success")}).catch(m=>{d(),r(m,"error")})},N=()=>{s(q(o)).unwrap().then(e=>{i(),c(),s(C()),r(e.message,"success")}).catch(e=>{i(),r(e,"error")})};l.useEffect(()=>{n.current&&o&&n.current.resetForm({...o})},[o]);const d=()=>{E(),n.current.resetForm({category:null}),s(C())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2",children:[t.jsx("h1",{className:`text-2xl font-bold text-center ${u.PRIMARY_TEXT}`,children:"Category Management"}),t.jsxs("div",{className:"flex items-center w-1/3",children:[t.jsx(H,{displayText:"Category",setSearch:D}),t.jsx("button",{onClick:g,className:`${u.COLOR_BUTTON} text-white  font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Category"})]})]}),t.jsx(Y,{columns:v,dataSource:M,current:p,pageSize:y,total:w,onChange:T}),t.jsx(j,{title:Object.keys(o).length?"Edit Category":"Add Category",isOpen:O,onCancel:d,footer:null,children:t.jsx(U,{ref:n,formConfig:S,onSubmit:F,initialValues:o,formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] hover:bg-[#FF0000] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(j,{title:"Confirm Deletion",isOpen:A,onCancel:i,onOk:N,children:t.jsx("p",{children:"Are you sure you want to delete this category?"})})]})};export{de as default};
