import{e as I,a as P,d as _,r as l,j as t,F as L,a6 as C,a7 as $,a8 as B,a9 as U,aa as f,s as q}from"./index-DDTZZVyy.js";import{D as z}from"./DynamicForm-DHNHB4mr.js";import{A as V,R as X}from"./ActionButtons-DpDOhPG0.js";import{u as b,A as Y,C as M}from"./useModal-C_vc7iY9.js";import{u as G}from"./usePagination-CUIv0Yth.js";import{C as H}from"./CommonClass-DJyhl18r.js";import{S as J}from"./Search-BhMeLajq.js";import{R as K}from"./EditOutlined-D9r1uaDu.js";import"./index-pJqgb8zV.js";import"./index-DgCCS9AH.js";import"./CloseCircleFilled-DVzGpbsr.js";import"./SearchOutlined-DZJBdFPE.js";const ce=()=>{const{dispatch:s}=q,{categories:j,totalCategories:O,selectedCategory:o}=I(e=>e.category),{showToast:r}=P(),{isOpen:w,openModal:g,closeModal:E}=b(),{isOpen:S,openModal:A,closeModal:i}=b(),{theme:u}=_(),n=l.useRef(),{page:h,setPage:p,limit:y,setLimit:N,search:x,setSearch:R,fetchData:c}=G(L,{},e=>{},e=>r(e,"error"));l.useEffect(()=>{c()},[h,y,x]),l.useEffect(()=>{p(1)},[x]);const T=(e,a)=>{p(e),N(a)},k=[{title:"Category Name",dataIndex:"category",key:"category"},{title:"Action",key:"action",render:(e,a)=>t.jsx(V,{buttons:[{text:"Edit",onClick:()=>{s(C(a)),g()},icon:K,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{A(),s(C(a))},icon:X,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}],D=[Object.keys(o).length&&{name:"id",label:"id",type:"hidden"},{name:"category",label:"Category Name",type:"text",inputClass:H.COMMON_INPUT,required:!0}],v=e=>{const a=Object.keys(o).length?$:B;s(a(e)).unwrap().then(m=>{d(),c(),r(m.message,"success")}).catch(m=>{d(),r(m,"error")})},F=()=>{s(U(o)).unwrap().then(e=>{i(),c(),s(f()),r(e.message,"success")}).catch(e=>{i(),r(e,"error")})};l.useEffect(()=>{n.current&&o&&n.current.resetForm({...o})},[o]);const d=()=>{E(),n.current.resetForm({category:null}),s(f())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2",children:[t.jsx("h1",{className:`text-2xl font-bold text-center ${u.PRIMARY_TEXT}`,children:"Category Management"}),t.jsxs("div",{className:"flex items-center w-1/3",children:[t.jsx(J,{displayText:"Category",setSearch:R}),t.jsx("button",{onClick:g,className:`${u.COLOR_BUTTON} text-white  font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Category"})]})]}),t.jsx(Y,{columns:k,dataSource:j,current:h,pageSize:y,total:O,onChange:T}),t.jsx(M,{title:Object.keys(o).length?"Edit Category":"Add Category",isOpen:w,onCancel:d,footer:null,children:t.jsx(z,{ref:n,formConfig:D,onSubmit:v,initialValues:o,formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] hover:bg-[#FF0000] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(M,{title:"Confirm Deletion",isOpen:S,onCancel:i,onOk:F,children:t.jsx("p",{children:"Are you sure you want to delete this category?"})})]})};export{ce as default};
