import{f as x,r as i,e as u,a as b,j as s,G as y,H as g,J as j,g as w,s as C}from"./index-pNvrWSmY.js";import{D as N}from"./DynamicForm-DdA_godh.js";const W=()=>{const{dispatch:t}=C,{userDetails:e}=x(o=>o.auth),[l,r]=i.useState(null);u();const a=i.useRef(),{showToast:m}=b();i.useEffect(()=>{if(a.current&&e){const o={id:e.id,name:e.name,email:e.email,phone_no:e.phone_no,secondary_phone_no:e.secondary_phone_no,school:e.school,standard:e.standard,about_me:e.about_me,address:e.address,city:e.city,state:e.state,pincode:e.pincode};a.current.resetForm({...o})}},[e]);const h=async o=>{var c,p;const d=y({...o});if(l){const n=await t(g({file:l,folder:"User/Profile"})).unwrap();d.profile_url=(p=(c=n==null?void 0:n.data)==null?void 0:c.data)==null?void 0:p.s3Url}t(j(d)).unwrap().then(n=>{m(n.message),t(w({id:e==null?void 0:e.id}))})},f=[{extra:s.jsx(v,{profileImage:e&&e.profile_url?e.profile_url:l,setProfileImage:r}),className:"col-span-12"},{name:"name",label:"Name",type:"text",required:!0,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"email",label:"Email",type:"email",required:!0,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"phone_no",label:"Phone No",type:"number",required:!0,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"secondary_phone_no",label:"Secondary Phone No",type:"number",required:!1,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"standard",label:"Standard",type:"text",required:!0,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"school",label:"School Name",type:"text",required:!1,inputClass:"input-class",columnWidth:"md:col-span-6 col-span-12"},{name:"about_me",label:"About Me",type:"textarea",required:!1,inputClass:"input-class",columnWidth:"col-span-12"},{name:"address",label:"Address",type:"textarea",required:!1,inputClass:"input-class",columnWidth:"col-span-12"},{name:"city",label:"City",type:"text",required:!0,inputClass:"input-class",columnWidth:"md:col-span-4 col-span-12"},{name:"state",label:"State",type:"text",required:!1,inputClass:"input-class",columnWidth:"md:col-span-4 col-span-12"},{name:"pincode",label:"Pincode",type:"number",required:!1,inputClass:"input-class",columnWidth:"md:col-span-4 col-span-12"}];return s.jsxs("div",{className:"lg:w-8/12 w-10/12 mx-auto p-6  my-10 border  bg-white rounded-2xl shadow-md",children:[s.jsx("h1",{className:" text-3xl font-bold text-center text-[#F68713] mb-8",children:"My Profile"}),s.jsx("div",{children:s.jsx(N,{ref:a,formConfig:f,onSubmit:h,gridClass:"grid grid-cols-12  gap-x-6 gap-y-2",formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] !hover:bg-[#F687130A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})})]})},v=({setProfileImage:t,profileImage:e})=>{u();const l=r=>{const a=r.target.files[0];a&&t(a)};return s.jsx("div",{className:"w-full flex justify-center",children:s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsx("input",{id:"profile-upload",type:"file",accept:".png,.jpg,.jpeg",className:"hidden",onChange:l}),s.jsx("label",{htmlFor:"profile-upload",className:"cursor-pointer",children:e?s.jsx("img",{src:typeof e=="object"?URL.createObjectURL(e):e,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-[#FFA167] shadow-md transition hover:opacity-80"}):s.jsxs("div",{className:"w-32 h-32 rounded-full gradient-bg flex flex-col items-center justify-center border-2 border-dashed border-gray-400 text-gray-600 hover:border-blue-500 transition",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-1 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01.88-7.9 6 6 0 0111.23 2.1A4.5 4.5 0 0120 16h-4m-4-4v8m0 0l-3-3m3 3l3-3"})}),s.jsx("p",{className:"text-sm",children:"Upload Photo"})]})})]})})};export{W as default};
