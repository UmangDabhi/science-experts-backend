import{r as l,s as d}from"./index-CiS2rZVo.js";import{a as P,v as z}from"./actions-D8sNnQF8.js";const v={COURSE:"COURSE",BOOK:"BOOK",MATERIAL:"MATERIAL"},w=()=>{const{dispatch:c}=d,u=l.useRef(null);return l.useEffect(()=>{const n=document.createElement("script");n.src="https://checkout.razorpay.com/v1/checkout.js",n.async=!0,document.body.appendChild(n)},[]),{initiatePayment:async({type:n,itemId:s,useCoins:y=!1,name:p="Science Experts",description:t="Payment",user:o={name:"",email:"",contact:""},onSuccess:i})=>{try{c(P({type:n,item_id:s,use_coins:y})).unwrap().then(a=>{if(!a.data.collect_payment){i(a);return}const{id:f,currency:h,amount:m}=a.data.order;function E(e){const r=e.replace(/[^\x20-\x7E]/g,"");return r.length>255?r.substring(0,255):r}t=E(t),(t==null?void 0:t.length)>250&&(t=t.substring(0,250));const _={key:"rzp_live_15e2P00fWGYZes",amount:m,currency:h,name:p,description:t,order_id:f,handler:function(e){c(z({type:n,item_id:s,paymentDetails:e,amount:m,coins_used:a.data.coins_to_use})).unwrap().then(()=>{i(e)})},prefill:{name:o.name||"",email:o.email||"",contact:o.contact||""},theme:{color:"#F37254"},modal:{backdropclose:!1}};new window.Razorpay(_).open()}).catch(a=>{console.error("Error initiating payment:",a)})}catch(a){console.error("Error initiating payment:",a)}},razorpayDivRef:u}};export{v as P,w as u};
