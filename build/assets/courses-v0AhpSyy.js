import{a9 as C,j as a,al as A,u as E,d as v,a as P,r as x,f as k}from"./index-D92yZQ6n.js";import{R as B}from"./index-CmHb5i_P.js";import{P as R}from"./Pagination-p42V4Omo.js";import{u as $}from"./usePagination-BALTYpN7.js";import{R as D}from"./SearchOutlined-hKkyWcyn.js";import"./index-7SQG4J1z.js";const _=({course:t,handleCourseClick:p})=>{var f,l,r,i;const d=((f=t==null?void 0:t.reviews)==null?void 0:f.reduce((c,o)=>c+o.rating,0))/((l=t==null?void 0:t.reviews)==null?void 0:l.length)||5,m=((r=t==null?void 0:t.enrollments)==null?void 0:r.length)||0,h=((i=t==null?void 0:t.modules)==null?void 0:i.length)||0,g=C(t.modules.reduce((c,o)=>c+o.duration,0),!0,!0,!1)||"00:00";return a.jsxs("div",{className:"flex w-full gap-3 bg-[#FFDBC4E5] cursor-pointer",onClick:()=>p(t.id),children:[a.jsx("div",{className:"flex-shrink-0 w-1/4 h-32 overflow-hidden",children:a.jsx("img",{src:t==null?void 0:t.thumbnail_url,alt:t==null?void 0:t.title,className:"object-cover w-full h-full"})}),a.jsxs("div",{className:"flex flex-col justify-between flex-grow p-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold",children:t==null?void 0:t.title}),a.jsx("p",{className:"italic",children:t==null?void 0:t.description})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{children:d}),a.jsx(B,{className:"px-1",value:d,disabled:!0,allowHalf:!0}),a.jsxs("span",{children:["(",m,")"]})]}),a.jsx("div",{children:a.jsxs("span",{children:[g," total hours (",h," videos)"]})}),a.jsx("div",{children:a.jsx("span",{children:t!=null&&t.is_paid&&JSON.parse(t==null?void 0:t.is_paid)?`â‚¹ ${t==null?void 0:t.price}`:"Free"})})]})]})]})},G=()=>{const[t]=A(),p=E(),{courses:d,totalCourses:m}=v(e=>e.course),{categories:h}=v(e=>e.category),{standards:g}=v(e=>e.standard),{showToast:f}=P(),[l,r]=x.useState({category:"All"}),[i,c]=x.useState(null),[o,w]=x.useState({}),{page:b,setPage:N,limit:y,setLimit:T,search:H,setSearch:F,fetchData:S}=$(k,o,e=>{},e=>f(e,"error"));x.useEffect(()=>{S()},[o]),x.useEffect(()=>{const e=t.get("category")||"All",s=t.get("class")||null;r({category:e}),c(s)},[t]),x.useEffect(()=>{w(e=>{const s={...e};if((l==null?void 0:l.category)!=="All"){const n=h.find(j=>j.category===(l==null?void 0:l.category));s.category=n==null?void 0:n.id}else delete s.category;if(i){const n=g.find(j=>j.standard===i);s.standard=n==null?void 0:n.id}else delete s.standard;return s})},[l,i]);const u=e=>{p(`/course/preview/${e}`)};return a.jsxs("div",{className:"bg-gray-50 ",children:[a.jsxs("h1",{className:"text-3xl font-bold text-center text-[#FB6000C4] pt-4 mb-8",children:[" ",i||"All Courses"]}),a.jsx("div",{className:"bg-[#FF6B0FB2] p-5 my-5 h-fit w-full flex  whitespace-nowrap ",children:a.jsxs("div",{className:"flex   overflow-x-auto gap-8  hide-scrollbar",children:[a.jsx("span",{onClick:()=>{r({category:"All"})},className:`${l&&(l==null?void 0:l.category)=="All"?"bg-[#FF6200E5]  text-white":"bg-white text-black"} px-3 py-2 text-lg rounded-full cursor-pointer`,children:"All"}),h.map((e,s)=>a.jsx("span",{onClick:()=>{r(e)},className:`${l&&e.category==(l==null?void 0:l.category)?"bg-[#FF6200E5]  text-white":"bg-white text-black"} px-3 py-2 text-lg rounded-full cursor-pointer`,children:e.category}))]})}),a.jsx("div",{className:"p-5 relative my-5 h-fit w-full flex  whitespace-nowrap justify-center items-center ",children:a.jsxs("div",{className:"relative w-4/6 ",children:[a.jsx(D,{className:"text-2xl absolute left-4 top-2 text-white"}),a.jsx("input",{id:"search",className:"bg-[#FB6000] pl-14 border-2 border-solid text-white border-white focus-visible:border-white rounded-full py-2 px-3 w-full",placeholder:"Search Course",onChange:e=>F(e.target.value)})]})}),a.jsx("div",{className:"flex flex-col gap-3",children:d==null?void 0:d.map((e,s)=>a.jsx(_,{course:e,handleCourseClick:u}))}),a.jsx(R,{total:Math.floor(m/y),goto:N,page:b})]})};export{G as default};
