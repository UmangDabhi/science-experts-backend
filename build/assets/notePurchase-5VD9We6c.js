import{y as b,d as l,r as a,ay as N,a as y,aE as g,j as e,al as w,s as v}from"./index-JjPhpDDT.js";import{u as P,P as C}from"./useRazorpayPayment-B4EnwgLq.js";import"./actions-DmIiQY2V.js";const _=()=>{var c;const{dispatch:u}=v,{materialId:r}=b(),{selectedMaterial:s,materials:F}=l(n=>n.material),{initiatePayment:x,razorpayDivRef:T}=P(),[d,o]=a.useState(!1),[t,h]=a.useState(!1),{openPrompt:m}=N(),{userDetails:p}=l(n=>n.auth),{showToast:f}=y(),j=()=>{if(!p){m();return}o(!0),x({useCoins:t,type:C.MATERIAL,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:n=>{i(),f("Purchase Success!")}}).finally(()=>o(!1))};a.useEffect(()=>{r&&i()},[r]);const i=()=>{u(g({id:r}))};return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-[#313131] w-full h-120 p-5 ",children:[e.jsxs("div",{className:"my-4 flex ",children:[e.jsx("div",{className:"w-52 shrink-0 h-auto border-2 rounded-xl border-white border-solid",children:e.jsx("img",{className:"  rounded-xl",src:s==null?void 0:s.thumbnail_url,alt:"Course Thumbnail Image"})}),e.jsx("div",{className:"bg-[#313131] flex row-span-2 p-4  text-white",children:e.jsxs("div",{className:"  flex flex-col justify-between",children:[e.jsx("h3",{className:"text-4xl ",children:s==null?void 0:s.title}),e.jsx("h3",{className:"text-xl line-clamp-5",children:s==null?void 0:s.description}),e.jsxs("p",{children:["Instructor: ",(c=s==null?void 0:s.tutor)==null?void 0:c.name]}),e.jsxs("p",{children:["Last Updated on ",w(s==null?void 0:s.updated_at)]})]})})]}),e.jsx("div",{className:"bg-[#666666] rounded-xl p-3 text-white  flex flex-col justify-between",children:e.jsx("p",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-5 h-5 bg-white rounded-full relative",children:e.jsx("span",{className:"w-3 h-3 bg-[#FF8F18] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),e.jsxs("span",{children:["₹ ",s==null?void 0:s.amount," Only"]})]})})})]}),e.jsxs("div",{className:"p-6 font-bold",children:[e.jsxs("p",{className:"text-2xl flex justify-between items-center",children:[e.jsx("span",{children:"Summary"}),e.jsxs("div",{className:"flex",children:[!(s!=null&&s.is_purchased)&&e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"useCoins",type:"checkbox",value:t,onChange:n=>h(n.target.checked),className:"accent-[#F68713] h-4 w-4 transform scale-150"}),e.jsx("label",{htmlFor:"useCoins",className:"mx-3 text-xl",children:"Use My Coins"})]})}),s!=null&&s.is_purchased?e.jsx("a",{href:s==null?void 0:s.material_url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"border-2 border-black rounded-3xl bg-[#FF8400] px-3 py-1 text-lg",children:"Download"}):e.jsx("button",{onClick:j,disabled:d,className:"border-2 border-black rounded-3xl bg-[#FF8400] px-3 py-1 text-lg",children:"Purchase Now"})]})]}),e.jsxs("p",{className:"text-xl ",children:["Total: ₹",s==null?void 0:s.amount]}),e.jsxs("p",{children:["No refunds or credits for unused or partial periods (unless required by law). Access starts immediately upon purchase with an initial charge of ₹",s==null?void 0:s.amount,". Recurring charges apply for continued access. To avoid future billing, cancel before the next cycle. By confirming the purchase, the user agrees to the Terms and authorizes recurring payments."]})]})]})};export{_ as default};
