import{e as y,c as w,r as s,u as C,aK as M,an as A,j as d,s as j,o as T,aL as v,aM as E}from"./index-0TCJKd1i.js";import{D as _}from"./DynamicForm-CuXSKoVS.js";import{T as q}from"./Toast-CZ0DzCWe.js";import{u as D}from"./useToast-WaxmSB6m.js";import{u as I}from"./uploadFile-DCOKfIrA.js";const k=()=>{const{dispatch:n}=j,{courseId:i,materialId:t}=y(),{selectedMaterial:a}=w(e=>e.material),[m,p]=s.useState({}),{toasts:f,showToast:F}=D(),x=C(),r=s.useRef(),b=[{name:"title",label:"Material Title",type:"text",required:!0,inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",maxLength:100},{name:"description",label:"Description",type:"textarea",inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",required:!0},{name:"material_url",label:"Material",type:"file",inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",required:!0,accept:".pdf",onFileChange:e=>{const o={file:e[0],folder:"Thumbnails"};n(I(o)).unwrap().then(l=>{var u,c;r.current.resetForm({...m,material_url:(c=(u=l==null?void 0:l.data)==null?void 0:u.data)==null?void 0:c.s3Url})})}},{name:"amount",label:"Amount",inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",required:!0,type:"number",min:0}],g=e=>{const o=T({...e,course:i!=="-"?i:null,amount:parseInt(e.amount)});n((t?v:E)(o)).unwrap().then(u=>{x(`/material/${i!=="-"?i:""}`),F(u.message,"success")})},h=s.useCallback(e=>{p(o=>({...o,...e}))},[]);return s.useEffect(()=>{n(t?M({id:t}):A({id:t}))},[t]),s.useEffect(()=>{if(r.current&&t){const e={id:a.id,title:a.title,description:a.description,material_url:a.material_url,amount:a.amount};r.current.resetForm({...e})}else r.current.resetForm({id:null,title:null,description:null,material_url:null,amount:null})},[a]),d.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-[#FFDBC4E5] rounded-2xl shadow-formShadow my-10 border border-[#FFA167]",children:[d.jsx("h1",{className:"text-3xl font-bold text-center text-[#FF6200] mb-8",children:"Add Material"}),d.jsx(_,{ref:r,formConfig:b,onSubmit:g,handleFieldChange:h,gridClass:"grid grid-cols-1  gap-6",formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"}),d.jsx(q,{toasts:f})]})};export{k as default};
