import{aG as v,j as s,x as N,e as x,r as t,ax as b,a as g,aD as y,d as T,s as C}from"./index-Bq_ZQb8N.js";import{u as P,P as O}from"./useRazorpayPayment-CN0bHWVf.js";import{I as D}from"./Icons-G6gJzKOH.js";import{R}from"./index-CrrM3vHG.js";import"./actions-BX_cmnLY.js";import"./index-3CzMt-gk.js";import"./index-Dg8NHXuh.js";const z=({selectedMaterial:n})=>{var r;const{rating:a,views:e}=v(n);return s.jsxs("div",{className:"relative  mx-auto bg-gradient-to-r from-blue-800 to-blue-900 text-white py-6  gap-4 overflow-hidden",children:[s.jsxs("div",{className:"w-10/12 flex mx-auto",children:[s.jsxs("div",{className:"w-2/3  flex flex-col justify-between ",children:[s.jsx("h3",{className:"text-4xl font-bold py-2 line-clamp-4",children:n==null?void 0:n.title}),s.jsx("p",{className:"italic line-clamp-5",children:n==null?void 0:n.description}),s.jsxs("div",{className:"flex gap-3 my-3 ",children:[s.jsx("img",{src:D.LOGO,className:"w-10 h-10 rounded-full bg-red-300"}),s.jsx("div",{className:"text-left flex items-center",children:s.jsxs("p",{children:["Instructor: ",(r=n==null?void 0:n.tutor)==null?void 0:r.name]})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:a}),s.jsx(R,{className:"px-1",value:a,disabled:!0,allowHalf:!0}),s.jsx("span",{children:e?`(${e})`:""})]}),s.jsx("div",{className:"bg-white/20 rounded-xl p-3  text-white flex flex-col justify-between",children:s.jsx("p",{className:"flex justify-between items-center",children:s.jsxs("span",{className:"flex items-center space-x-2 font-semibold text-2xl",children:[s.jsx("span",{className:"w-5 h-5 bg-white rounded-full relative",children:s.jsx("span",{className:"w-3 h-3 bg-[#FF8F18] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),s.jsxs("span",{children:["₹ ",n==null?void 0:n.amount," Only"]})]})})})]}),s.jsx("div",{className:"w-1/3",children:s.jsx("div",{className:"h-[30rem] object-contain flex items-center justify-center ",children:s.jsx("img",{className:" h-full",src:n==null?void 0:n.thumbnail_url,alt:"Course Thumbnail Image"})})})]}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[50vw] h-[50vw] max-w-[20rem] max-h-[20rem] -top-[10vw] -left-[10vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[25vw] h-[25vw] max-w-[12rem] max-h-[12rem] top-[2vw] right-[40vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[25vw] left-[30vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] top-[30vw] right-[5vw]"}),s.jsx("div",{className:"absolute rounded-full bg-white/20 z-0 w-[20vw] h-[20vw] max-w-[10rem] max-h-[10rem] -top-[5vw] -right-[5vw]"})]})},U=()=>{const{dispatch:n}=C,{materialId:a}=N(),{selectedMaterial:e,materials:r}=x(o=>o.material),{initiatePayment:u,razorpayDivRef:_}=P(),[h,i]=t.useState(!1),[m,d]=t.useState(!1),{openPrompt:p}=b(),{userDetails:f}=x(o=>o.auth),{showToast:w}=g(),j=()=>{if(!f){p();return}i(!0),u({useCoins:m,type:O.MATERIAL,itemId:e==null?void 0:e.id,name:e==null?void 0:e.title,description:e==null?void 0:e.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:o=>{c(),w("Purchase Success!")}}).finally(()=>i(!1))};t.useEffect(()=>{a&&c()},[a]);const c=()=>{n(y({id:a}))},{theme:l}=T();return s.jsxs("div",{children:[s.jsx(z,{selectedMaterial:e}),s.jsxs("div",{className:"p-6 font-bold",children:[s.jsxs("p",{className:"text-2xl flex justify-between items-center",children:[s.jsx("span",{children:"Summary"}),s.jsxs("div",{className:"flex",children:[!(e!=null&&e.is_purchased)&&s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"useCoins",type:"checkbox",value:m,onChange:o=>d(o.target.checked),className:"accent-[#F68713] h-4 w-4 transform scale-150"}),s.jsx("label",{htmlFor:"useCoins",className:"mx-3 text-xl",children:"Use My Coins"})]})}),e!=null&&e.is_purchased?s.jsx("a",{href:e==null?void 0:e.material_url,download:!0,target:"_blank",rel:"noopener noreferrer",className:`px-5 py-3 text-xl ${l.COLOR_BUTTON}`,children:"Download"}):s.jsx("button",{onClick:j,disabled:h,className:`px-5 py-3 text-xl ${l.COLOR_BUTTON}`,children:"Purchase Now"})]})]}),s.jsxs("p",{className:"text-xl ",children:["Total: ₹",e==null?void 0:e.amount]}),s.jsxs("p",{children:["No refunds or credits for unused or partial periods (unless required by law). Access starts immediately upon purchase with an initial charge of ₹",e==null?void 0:e.amount,". Recurring charges apply for continued access. To avoid future billing, cancel before the next cycle. By confirming the purchase, the user agrees to the Terms and authorizes recurring payments."]})]})]})};export{U as default};
