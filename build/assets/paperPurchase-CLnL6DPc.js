import{z as g,f as i,r as a,aD as y,a as x,aP as E,e as S,aQ as T,j as C,s as j}from"./index-9u-Z54xc.js";import{u as v,P as w}from"./useRazorpayPayment-kWBuFlcX.js";import{P as z}from"./PurchasePreviewComponent-DFktN8cz.js";import"./actions-DNe8e-Zl.js";import"./index-O8gkXI22.js";import"./ContextIsolator-Qp2QtNF2.js";import"./index-B0jPUqxI.js";import"./index-CdTTC2gm.js";const K=()=>{const{dispatch:c}=j,{paperId:e}=g(),{selectedPaper:s,papers:I}=i(t=>t.paper),{initiatePayment:p,razorpayDivRef:J}=v(),[u,o]=a.useState(!1),[r,m]=a.useState(!1),{openPrompt:f}=y(),{userDetails:h}=i(t=>t.auth),{showToast:P}=x(),l=()=>{if(!h){f();return}o(!0),p({useCoins:r,type:w.BOOK,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:t=>{n(),P("Purchase Success!")}}).finally(()=>o(!1))};a.useEffect(()=>{e&&n()},[e]);const n=()=>{c(E({id:e}))};S();const{rating:d,views:D}=T(s);return C.jsx(z,{selectedItem:s,rating:d,views:D,useCoins:r,setUseCoins:m,handlePurchaseClick:l,loading:u})};export{K as default};
