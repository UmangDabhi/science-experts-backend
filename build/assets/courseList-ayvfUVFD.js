import{r as c,I as E,_ as q,u as D,f,e as F,a as B,j as s,S as L,T as z,F as v,U as b,s as V,V as X,W as Y,N as U}from"./index-BIwGSPbH.js";import{A as H,R as W}from"./ActionButtons-BFcdNMlj.js";import{u as G,C as J}from"./useModal-GWWM9RFR.js";import{S as K}from"./Search-NBT3D6sS.js";import{A as Q}from"./AntdTable-CSY8_0mG.js";import{u as Z}from"./usePagination-C6MB7ved.js";import{s as ee}from"./courseService-SFrZFzB9.js";import{S as w}from"./index-C7qz2ntP.js";import{R as te}from"./EditOutlined-CTn6Yqnk.js";import"./index-DksuG98G.js";import"./ContextIsolator-qG6bPkcN.js";import"./index-Dc2cs8cU.js";import"./CloseCircleFilled-C0XbTAnl.js";import"./SearchOutlined-QO09orvp.js";import"./CheckOutlined-DEzfDvrX.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},oe=function(n,l){return c.createElement(E,q({},n,{ref:l,icon:se}))},h=c.forwardRef(oe);const ve=()=>{const{dispatch:a}=V,n=D(),{userData:l}=f(e=>e.auth),{courses:A,totalCourses:y,selectedCourse:k}=f(e=>e.course),{theme:d}=F(),{showToast:i}=B(),{page:p,setPage:m,limit:x,setLimit:j,search:g,setSearch:N,fetchData:r}=Z(X,{},e=>{},e=>i(e,"error")),{isOpen:I,openModal:M,closeModal:C}=G();c.useEffect(()=>{r()},[p,x,g]),c.useEffect(()=>{m(1)},[g]);const R=[{title:"Course Title",dataIndex:"title",key:"title"},{title:"Is Paid",dataIndex:"is_paid",key:"is_paid",width:"12%",render:(e,t)=>s.jsx(w,{onChange:o=>P(t,o),checkedChildren:"Paid",unCheckedChildren:"Free",style:{backgroundColor:"#F68713"},value:e})},{title:"Amount",dataIndex:"price",key:"amount",width:"12%",editable:e=>e==null?void 0:e.is_paid,render:(e,t)=>s.jsx("span",{className:`text-lg font-semibold ${d.PRIMARY_TEXT}`,children:t!=null&&t.is_paid?`â‚¹${e}`:"Free"})},{title:"Discount",dataIndex:"discount",key:"discount",width:"12%",editable:e=>e==null?void 0:e.is_paid,render:(e,t)=>s.jsx("span",{className:`text-lg font-semibold ${d.PRIMARY_TEXT}`,children:t!=null&&t.is_paid?`${e}%`:"Free"})},...(l==null?void 0:l.role)==L.ADMIN?[{title:"Approval",dataIndex:"is_approved",key:"is_approved",width:"12%",render:(e,t)=>s.jsx(w,{onChange:o=>$(t,o),checkedChildren:"Approved",unCheckedChildren:"Not Approved",style:{backgroundColor:"#F68713"},value:e})}]:[],{title:"Action",key:"action",width:"33%",render:(e,t)=>s.jsx(H,{className:"flex flex-wrap justify-center items-center",buttons:[{text:"Order",onClick:()=>{n(`/ManageOrder/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Module",onClick:()=>{n(`/courses/module/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Notes",onClick:()=>{n(`/material/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Edit",onClick:()=>{n(`/addcourse/${t.id}`)},icon:te,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{a(z(t)),M()},icon:W,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}].filter(Boolean),_=(e,t)=>{m(e),j(t)},T=()=>{n("/addcourse")},O=()=>{a(Y(k)).unwrap().then(e=>{C(),r(),a(U()),i(e.message,"success")}).catch(e=>{i(e,"error")})},$=(e,t)=>{const o=v({id:e.id,is_approved:t});a(b(o)).unwrap().then(u=>{r(),i(u.message,"success")})},P=(e,t)=>{const o=v({id:e.id,is_paid:t});a(b(o)).unwrap().then(u=>{r(),i(u.message,"success")})},S=e=>{const t={...e,language:e.language?e.language.id:null};ee({data:t,content:e.content?e.content:"",dispatch:a,courseId:e.id}).then(o=>{r(),i(o.message,"success")})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2 ",children:[s.jsx("h1",{className:`text-2xl font-bold text-center ${d.PRIMARY_TEXT}`,children:"Course Management"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(K,{displayText:"Course",setSearch:N}),s.jsx("button",{onClick:T,className:`${d.COLOR_BUTTON} text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Course"})]})]}),s.jsx(Q,{columns:R,dataSource:A,current:p,pageSize:x,total:y,onChange:_,onSaveRow:S}),s.jsx(J,{title:"Confirm Deletion",isOpen:I,onCancel:C,onOk:O,children:s.jsx("p",{children:"Are you sure you want to delete this standard?"})})]})};export{ve as default};
