import{r as a,I as N,_ as y,a as M,j as t,am as E,s as R,u as H,y as I,d as O,b as g,aj as w,D as T}from"./index-YuWDTqdT.js";import{V}from"./VideoJs-zbdmI9ip.js";import{R as B}from"./index-CDH7q0Ga.js";import{T as j}from"./TableContent-CY81Pg8H.js";import{c as F}from"./actions-Cv6KCsHT.js";import"./index-ksvCFu9B.js";var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},_=function(l,n){return a.createElement(N,y({},l,{ref:n,icon:L}))},D=a.forwardRef(_),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},P=function(l,n){return a.createElement(N,y({},l,{ref:n,icon:U}))},A=a.forwardRef(P);const G=({course:i,module:l})=>{const{dispatch:n}=R,{showToast:c}=M(),[e,r]=a.useState(5),[d,u]=a.useState(""),v=()=>{n(E({review:d,rating:e,course:i,module:l})).unwrap().then(x=>{u(""),r(5),c(x.message,"success")})};return t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsx("p",{className:"text-2xl p-3 font-bold",children:"Review"}),t.jsx(B,{className:"p-3",value:e,onChange:r,allowHalf:!0}),t.jsx("textarea",{className:"rounded-xl w-full p-4 h-40",placeholder:"Give Review",value:d,onChange:m=>u(m.target.value)}),t.jsx("button",{className:"p-3 m-2 border-2 border-solid rounded-2xl self-end bg-[#FB6000] text-white",type:"submit",onClick:v,children:"Submit Review"})]})},Y=()=>{var b;const{dispatch:i}=R,l=H(),{courseId:n,moduleId:c}=I(),{selectedCourse:e}=O(o=>o.course),[r,d]=a.useState(1),[u,v]=a.useState([]),[m,x]=a.useState([]),[S,z]=a.useState([]);a.useEffect(()=>{n&&$()},[n]),a.useEffect(()=>{var o;(o=e==null?void 0:e.modules)!=null&&o.length&&(x(e.modules.map(s=>({left:t.jsx(g,{to:`/course/view/${e.id}/module/${s.id}`,children:s.title}),right:w(s.duration)}))),z(e==null?void 0:e.materials.map(s=>({left:t.jsx(g,{to:`/course/view/${e.id}/module/${s.id}`,children:s.title}),right:w(s.duration)}))))},[e]),a.useEffect(()=>{var s;if(!((s=e==null?void 0:e.modules)!=null&&s.length)||!c)return;const o=e.modules.find(h=>h.id===c);o&&v([{src:o.video_url,type:`video/${o.video_url.split(".").pop()}`}])},[e,c]);const $=()=>{i(T({id:n}))},k=()=>{var h;i(F({course:n,module:c}));const s=e.modules.findIndex(p=>p.id===c);if(s&&s<((h=e==null?void 0:e.modules)==null?void 0:h.length)){const p=e.modules[s];l(`/course/view/${e.id}/module/${p.id}`)}},[f,C]=a.useState(!0);return t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mx-auto relative",children:[t.jsx(V,{sources:u,onEnd:k}),t.jsx("button",{className:"absolute top-3 right-2 z-20  text-white p-2 rounded-full shadow-md",onClick:()=>C(!f),children:f?t.jsx(D,{className:"text-xl"}):t.jsx(A,{className:"text-xl"})}),t.jsxs("div",{className:`absolute top-0 right-0 z-10 text-white bg-black bg-opacity-25 w-72 h-full p-4 rounded-lg shadow-lg transition-all duration-300 ${f?"translate-x-0  ":"translate-x-[20rem] hidden"}`,children:[t.jsx("div",{className:"flex justify-center items-center relative",children:t.jsx("p",{className:"font-bold text-lg",children:"Course Content"})}),t.jsx("div",{className:"overflow-y-auto hide-scrollbar max-h-[85vh] mt-4",children:(b=e==null?void 0:e.modules)==null?void 0:b.map(o=>t.jsxs("div",{className:"flex items-center justify-between space-x-2 py-2 border-b border-white/30",children:[t.jsx("p",{className:"whitespace-normal break-words flex-1",children:o.title}),t.jsx("input",{disabled:!0,checked:o==null?void 0:o.progress.length,type:"checkbox",className:"form-checkbox w-4 h-4 text-orange-500"})]},o.id))})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"flex space-x-4 mb-6",children:["Course Content","Review","Notes"].map((o,s)=>t.jsx("button",{onClick:()=>d(s+1),className:`px-4 py-2 rounded-3xl ${r===s+1?"bg-[#FB6000] text-white":"hover:bg-gray-100"}`,children:o},s))}),t.jsxs("div",{children:[r===1&&t.jsx(j,{title:"Content",content:m}),r===2&&t.jsx(G,{course:n,module:c}),r===3&&t.jsx(j,{title:"Notes",content:S})]})]})]})};export{Y as default};
