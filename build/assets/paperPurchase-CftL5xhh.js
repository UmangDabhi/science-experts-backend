import{z as x,f as u,r as o,aD as C,a as R,aQ as S,e as T,aR as L,j,s as v}from"./index-CYgJ5ZTk.js";import{u as z,P as I}from"./useRazorpayPayment-BzzLQ8Nk.js";import{b as J,P as k}from"./PurchasePreviewComponent-DowlNe4B.js";import"./actions-DG5SgnAG.js";import"./index-BU0u-q5C.js";import"./ContextIsolator-BKvLsOSU.js";import"./index-B7v7tR-V.js";import"./index-GvTkkyb0.js";const F=()=>{const{dispatch:p}=v,{paperId:a}=x(),{selectedPaper:s,papers:A}=u(t=>t.paper),{initiatePayment:m,razorpayDivRef:M}=z(),{initiateDownload:f,isLoading:d}=J(),[l,e]=o.useState(!1),[n,P]=o.useState(!1),{openPrompt:i}=C(),{userDetails:r}=u(t=>t.auth),{showToast:h}=R(),D=()=>{if(!r){i();return}e(!0),m({useCoins:n,type:I.PAPER,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:t=>{c(),h("Purchase Success!")}}).finally(()=>e(!1))};o.useEffect(()=>{a&&c()},[a]);const g=(t,E)=>{if(!r){i();return}f(t,E)},c=()=>{p(S({id:a}))};T();const{rating:w,views:y}=L(s);return j.jsx(k,{selectedItem:s,rating:w,views:y,useCoins:n,setUseCoins:P,handlePurchaseClick:D,handleDownloadClick:g,loading:l,downloadLoading:d})};export{F as default};
