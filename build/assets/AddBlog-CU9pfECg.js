import{v as B,d as u,r as s,a as w,u as M,z as O,j as d,b3 as v,b4 as T,C as j,D as A,E,s as q,w as I,b5 as U,b6 as D}from"./index-CmF4KgW5.js";import{D as L}from"./DynamicForm-DGAKXoeT.js";import{J as P}from"./JoditEditorComponent-DR0Ndnp6.js";import{C as g}from"./CommonClass-Dpx7ipLY.js";const z=()=>{const{dispatch:l}=q,{blogId:n}=B(),{categories:m}=u(e=>e.category),{standards:p}=u(e=>e.standard),{languages:b}=u(e=>e.language),{selectedBlog:t}=u(e=>e.blog),[f,C]=s.useState({}),{showToast:o}=w(),h=M(),r=s.useRef(),{uploadFile:F}=O(),[i,c]=s.useState(""),x=s.useCallback(e=>{c(e)},[]),y=[{name:"title",label:"Blog Title",type:"text",required:!0,inputClass:g.COMMON_INPUT,maxLength:100},{name:"description",label:"Description",type:"textarea",inputClass:g.COMMON_INPUT,required:!0},{extra:d.jsx(P,{title:"Blog Content",content:i,onChange:x})},{name:"thumbnail_url",label:"Thumbnail URL",inputClass:g.COMMON_INPUT,type:"file",required:!0,accept:".jpg,.jpeg,.png",onFileChange:async e=>{if(!e[0])return o("Select a file first!");try{const a=await F(e[0],"Blog/Thumbnails");r.current.resetForm({...f,thumbnail_url:a}),o("File Uploaded Successfully")}catch{o("Something Went Wrong")}}},{name:"language",label:"Language",inputClass:g.COMMON_INPUT,type:"select",required:!1,options:b.map(e=>({label:e.language,value:e.id}))},{name:"categories",label:"Categories",inputClass:"bg-[#F4F4F4] border-3 border-[#222]  ",type:"multi-select",required:!1,options:m.map(e=>({label:e.category,value:e.id}))},{name:"standards",label:"Standards",inputClass:"bg-[#F4F4F4] border-3 border-[#222]  ",type:"multi-select",required:!1,options:p.map(e=>({label:e.standard,value:e.id}))}],S=e=>{i||o("Blog Content is Required","error");const a=I({...e,amount:parseInt(e.amount),language:e.language});i&&(a.blog_content=i),l((n?U:D)(a)).unwrap().then(_=>{h("/blogList"),o(_.message,"success")})},N=s.useCallback(e=>{C(a=>({...a,...e}))},[]);return s.useEffect(()=>{l(n?v({id:n}):T({id:n}))},[n]),s.useEffect(()=>{if(r.current&&n){const e={id:t.id,title:t.title,description:t.description,thumbnail_url:t.thumbnail_url};t.categories&&(e.categories=[...t.categories].map(a=>a.id)),t.standards&&(e.standards=[...t.standards].map(a=>a.id)),t.language&&(e.language=t.language.id),c(t.blog_content),r.current.resetForm({...e})}else r.current.resetForm({id:null,title:null,description:null,thumbnail_url:null,categories:null,standards:null,language:null}),c(null)},[t]),s.useEffect(()=>{l(j({})),l(A({})),l(E({}))},[]),d.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-[#FFDBC4E5] rounded-2xl shadow-formShadow my-10 border border-[#FFA167]",children:[d.jsx("h1",{className:"text-3xl font-bold text-center text-[#FF6200] mb-8",children:"Add Blog"}),d.jsx(L,{ref:r,formConfig:y,onSubmit:S,handleFieldChange:N,gridClass:"grid grid-cols-1  gap-6",formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})]})};export{z as default};
