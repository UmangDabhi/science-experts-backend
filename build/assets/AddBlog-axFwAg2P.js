import{v as M,d,r as s,a as O,u as v,y as T,j as g,b3 as j,b4 as A,B as q,C as E,D as I,s as U,w as D,b5 as L,b6 as P}from"./index-COGDzE6e.js";import{D as R}from"./DynamicForm-vLQuz4tz.js";import{C as c}from"./CommonClass-Dpx7ipLY.js";import{u as V}from"./uploadFile-aNihOkik.js";import{J as k}from"./JoditEditorComponent-DsvluR8o.js";const Q=()=>{const{dispatch:l}=U,{blogId:n}=M(),{categories:C}=d(e=>e.category),{standards:h}=d(e=>e.standard),{languages:F}=d(e=>e.language),{selectedBlog:t}=d(e=>e.blog),[x,y]=s.useState({}),{showToast:p}=O(),B=v(),o=s.useRef(),{setStatus:b}=T(),[r,m]=s.useState(""),N=s.useCallback(e=>{m(e)},[]),_=[{name:"title",label:"Blog Title",type:"text",required:!0,inputClass:c.COMMON_INPUT,maxLength:100},{name:"description",label:"Description",type:"textarea",inputClass:c.COMMON_INPUT,required:!0},{extra:g.jsx(k,{title:"Blog Content",content:r,onChange:N})},{name:"thumbnail_url",label:"Thumbnail URL",inputClass:c.COMMON_INPUT,type:"file",required:!0,accept:".jpg,.jpeg,.png",onFileChange:e=>{const a={file:e[0],folder:"Blog/Thumbnails"};b(!0),l(V(a)).unwrap().then(i=>{var u,f;o.current.resetForm({...x,thumbnail_url:(f=(u=i==null?void 0:i.data)==null?void 0:u.data)==null?void 0:f.s3Url})}).finally(()=>{b(!1)})}},{name:"language",label:"Language",inputClass:c.COMMON_INPUT,type:"select",required:!1,options:F.map(e=>({label:e.language,value:e.id}))},{name:"categories",label:"Categories",inputClass:"bg-[#F4F4F4] border-3 border-[#222]  ",type:"multi-select",required:!1,options:C.map(e=>({label:e.category,value:e.id}))},{name:"standards",label:"Standards",inputClass:"bg-[#F4F4F4] border-3 border-[#222]  ",type:"multi-select",required:!1,options:h.map(e=>({label:e.standard,value:e.id}))}],S=e=>{r||p("Blog Content is Required","error");const a=D({...e,amount:parseInt(e.amount),language:e.language});r&&(a.blog_content=r),l((n?L:P)(a)).unwrap().then(u=>{B("/blogList"),p(u.message,"success")})},w=s.useCallback(e=>{y(a=>({...a,...e}))},[]);return s.useEffect(()=>{l(n?j({id:n}):A({id:n}))},[n]),s.useEffect(()=>{if(o.current&&n){const e={id:t.id,title:t.title,description:t.description,thumbnail_url:t.thumbnail_url};t.categories&&(e.categories=[...t.categories].map(a=>a.id)),t.standards&&(e.standards=[...t.standards].map(a=>a.id)),t.language&&(e.language=t.language.id),m(t.blog_content),o.current.resetForm({...e})}else o.current.resetForm({id:null,title:null,description:null,thumbnail_url:null,categories:null,standards:null,language:null}),m(null)},[t]),s.useEffect(()=>{l(q({})),l(E({})),l(I({}))},[]),g.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-[#FFDBC4E5] rounded-2xl shadow-formShadow my-10 border border-[#FFA167]",children:[g.jsx("h1",{className:"text-3xl font-bold text-center text-[#FF6200] mb-8",children:"Add Blog"}),g.jsx(R,{ref:o,formConfig:_,onSubmit:S,handleFieldChange:w,gridClass:"grid grid-cols-1  gap-6",formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})]})};export{Q as default};
