import{e as I,a as P,d as _,r,j as t,H as L,ab as g,ac as $,ad as B,ae as U,af as b,s as q}from"./index-1SOVWjLS.js";import{D as z}from"./DynamicForm-DQoLSg5y.js";import{A as H,R as V}from"./ActionButtons--bF80goz.js";import{u as C,C as M}from"./useModal-CfWRPnNO.js";import{A as X}from"./AntdTable-DaByVp-F.js";import{u as Y}from"./usePagination-NGBzaucT.js";import{C as G}from"./CommonClass-DJyhl18r.js";import{S as J}from"./Search-BrcCFLC9.js";import{R as K}from"./EditOutlined-HyMhzPIx.js";import"./index-CcET_qEc.js";import"./ContextIsolator-GbFQ609C.js";import"./index-ACy-ARWx.js";import"./CloseCircleFilled-bPATCLPJ.js";import"./CheckOutlined-Cm1Ea1Gj.js";import"./SearchOutlined-CwTd0ZdT.js";const ue=()=>{const{dispatch:s}=q,{standards:j,totalStandards:y,selectedStandard:a}=I(e=>e.standard),{showToast:o}=P(),{isOpen:O,openModal:c,closeModal:w}=C(),{isOpen:A,openModal:E,closeModal:m}=C(),{theme:u}=_(),n=r.useRef(),{page:p,setPage:h,limit:f,setLimit:N,search:x,setSearch:R,fetchData:d}=Y(L,{},e=>{},e=>o(e,"error"));r.useEffect(()=>{d()},[p,f,x]),r.useEffect(()=>{h(1)},[x]);const T=(e,l)=>{h(e),N(l)},k=[{title:"Standard Name",dataIndex:"standard",key:"standard"},{title:"Action",key:"action",render:e=>t.jsx(H,{buttons:[{text:"Edit",onClick:()=>{s(g(e)),c()},icon:K,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{E(),s(g(e))},icon:V,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}],D=[Object.keys(a).length&&{name:"id",label:"id",type:"hidden"},{name:"standard",label:"Standard Name",type:"text",inputClass:G.COMMON_INPUT,required:!0}],v=e=>{const l=Object.keys(a).length?$:B;s(l(e)).unwrap().then(i=>{S(),d(),o(i.message,"success")}).catch(i=>{o(i,"error")})},F=()=>{s(U(a)).unwrap().then(e=>{m(),d(),s(b()),o(e.message,"success")}).catch(e=>{o(e,"error")})};r.useEffect(()=>{n.current&&a&&n.current.resetForm({...a})},[a]);const S=()=>{w(),n.current.resetForm({standard:null}),s(b())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2",children:[t.jsx("h1",{className:`text-2xl font-bold text-center ${u.PRIMARY_TEXT}`,children:"Standard Management"}),t.jsxs("div",{className:"flex items-center w-1/3",children:[t.jsx(J,{displayText:"Standard",setSearch:R}),t.jsx("button",{onClick:c,className:`${u.COLOR_BUTTON} text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Standard"})]})]}),t.jsx(X,{columns:k,dataSource:j,current:p,pageSize:f,total:y,onChange:T}),t.jsx(M,{title:Object.keys(a).length?"Edit Standard":"Add Standard",isOpen:O,onCancel:S,footer:null,children:t.jsx(z,{ref:n,formConfig:D,onSubmit:v,initialValues:a,formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] !hover:bg-[#F687130A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(M,{title:"Confirm Deletion",isOpen:A,onCancel:m,onOk:F,children:t.jsx("p",{children:"Are you sure you want to delete this standard?"})})]})};export{ue as default};
