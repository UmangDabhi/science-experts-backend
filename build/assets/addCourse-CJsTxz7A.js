import{x as O,e as d,d as S,a as T,C as w,r,u as I,j as c,D as q,E as D,F as P,G as U,H as j,s as A}from"./index-DDTZZVyy.js";import{D as E}from"./DynamicForm-DHNHB4mr.js";import{J as v}from"./JoditEditorComponent-DoYffhBO.js";import{C as l}from"./CommonClass-DJyhl18r.js";import{s as R}from"./courseService-BGxCcmyW.js";const B=()=>{const{dispatch:n}=A,{courseId:i}=O(),{categories:g}=d(e=>e.category),{standards:C}=d(e=>e.standard),{languages:b}=d(e=>e.language),{selectedCourse:s}=d(e=>e.course),{theme:h}=S(),{showToast:u}=T(),{uploadFile:f}=w(),[t,x]=r.useState({}),[p,m]=r.useState(""),o=r.useRef(),_=I(),y=r.useCallback(e=>{m(e)},[]),N=[{name:"title",label:"Course Title",type:"text",required:!0,maxLength:100,inputClass:l.COMMON_INPUT},{name:"description",label:"Description",type:"textarea",inputClass:l.COMMON_INPUT,required:!0},{extra:c.jsx(v,{title:"Detail Description",content:p,onChange:y})},{name:"thumbnail_url",label:"Thumbnail URL",inputClass:l.COMMON_INPUT,type:"file",required:!0,accept:".jpg,.jpeg,.png",onFileChange:async e=>{if(!e[0])return u("Select a file first!");try{const a=await f(e[0],"Course/Thumbnails");o.current.resetForm({...t,thumbnail_url:a}),u("File Uploaded Successfully")}catch{u("Something Went Wrong")}}},{name:"language",label:"Language",inputClass:l.COMMON_INPUT,type:"select",required:!0,options:b.map(e=>({label:e.language,value:e.id}))},{name:"categories",label:"Categories",inputClass:"bg-white border-3 border-[#222]  ",type:"multi-select",required:!0,options:g.map(e=>({label:e.category,value:e.id}))},{name:"standards",label:"Standards",inputClass:"bg-white border-3 border-[#222]  ",type:"multi-select",required:!0,options:C.map(e=>({label:e.standard,value:e.id}))},{name:"is_paid",label:"Is Paid?",type:"checkbox",required:!1},{name:"price",label:"Price",inputClass:l.COMMON_INPUT,type:"number",required:t==null?void 0:t.is_paid,min:0,hidden:!(t!=null&&t.is_paid)},{name:"discount",label:"Discount (%)",inputClass:l.COMMON_INPUT,type:"number",required:!1,min:0,max:100,hidden:!(t!=null&&t.is_paid)}],F=e=>{R({data:e,content:p,dispatch:n,courseId:i}).then(a=>{_("/courses/manage"),u(a.message,"success")}).catch(a=>{})};r.useEffect(()=>{n(i?q({id:i}):D({id:i}))},[i]),r.useEffect(()=>{n(P({})),n(U({})),n(j({}))},[]);const M=r.useCallback(e=>{x(a=>({...a,...e}))},[]);return r.useEffect(()=>{if(o.current&&i){const e={id:s.id,title:s.title,description:s.description,is_paid:s.is_paid,price:parseInt(s.price),discount:s.discount,thumbnail_url:s.thumbnail_url};s.categories&&(e.categories=[...s.categories].map(a=>a.id)),s.standards&&(e.standards=[...s.standards].map(a=>a.id)),s.language&&(e.language=s.language.id),m(s.detail_description),o.current.resetForm({...e})}else o.current.resetForm({id:null,title:null,description:null,thumbnail_url:null,is_paid:null,price:null,discount:null,categories:null,standards:null,language:null}),m(null)},[s]),c.jsxs("div",{className:`max-w-6xl mx-auto p-6 rounded-2xl shadow-formShadow my-10 border border-[#FFA167] ${h.GRADIENT_BG}`,children:[c.jsx("h1",{className:" text-3xl font-bold text-center text-[#F68713] mb-8",children:"Create New Course"}),c.jsx(E,{ref:o,formConfig:N,onSubmit:F,handleFieldChange:M,gridClass:"grid grid-cols-1 gap-6",formClass:"space-y-8 w-full",submitClass:"!bg-[#F68713] !hover:bg-[#F687130A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})]})};export{B as default};
