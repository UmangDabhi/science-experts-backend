import{w as g,f as i,r as o,aD as y,a as E,aJ as T,e as x,aM as S,j as w,s as C}from"./index-DTy30a3Z.js";import{u as I,P as J}from"./useRazorpayPayment-CVUcNgNl.js";import{P as R}from"./PurchasePreviewComponent-6_uHX6X3.js";import"./actions-4UEewJ6Z.js";import"./index-BI0nt5hw.js";import"./ContextIsolator-DCsTuVGd.js";import"./index-BKf-VVpj.js";import"./index-vdMU6tb6.js";const b=()=>{const{dispatch:c}=C,{materialId:e}=g(),{selectedMaterial:s,materials:j}=i(t=>t.material),{initiatePayment:m,razorpayDivRef:v}=I(),[u,a]=o.useState(!1),[n,p]=o.useState(!1),{openPrompt:f}=y(),{userDetails:P}=i(t=>t.auth),{showToast:h}=E(),l=()=>{if(!P){f();return}a(!0),m({useCoins:n,type:J.MATERIAL,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:t=>{r(),h("Purchase Success!")}}).finally(()=>a(!1))};o.useEffect(()=>{e&&r()},[e]);const r=()=>{c(T({id:e}))};x();const{rating:d,views:D}=S(s);return w.jsx(R,{selectedItem:s,rating:d,views:D,useCoins:n,setUseCoins:p,handlePurchaseClick:l,loading:u})};export{b as default};
