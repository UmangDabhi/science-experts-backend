import{r as l,s as _}from"./index-CDERYnxk.js";import{a as d,v as R}from"./actions-FPSvhs5P.js";const v={COURSE:"COURSE",BOOK:"BOOK",MATERIAL:"MATERIAL",PAPER:"PAPER"},w=()=>{const{dispatch:c}=_,u=l.useRef(null);return l.useEffect(()=>{const n=document.createElement("script");n.src="https://checkout.razorpay.com/v1/checkout.js",n.async=!0,document.body.appendChild(n)},[]),{initiatePayment:async({type:n,itemId:s,useCoins:y=!1,name:p="Science Experts",description:t="Payment",user:o={name:"",email:"",contact:""},onSuccess:i})=>{try{c(d({type:n,item_id:s,use_coins:y})).unwrap().then(a=>{if(!a.data.collect_payment){i(a);return}const{id:f,currency:E,amount:m}=a.data.order;function P(e){const r=e.replace(/[^\x20-\x7E]/g,"");return r.length>255?r.substring(0,255):r}t=P(t),(t==null?void 0:t.length)>250&&(t=t.substring(0,250));const h={key:"rzp_live_15e2P00fWGYZes",amount:m,currency:E,name:p,description:t,order_id:f,handler:function(e){c(R({type:n,item_id:s,paymentDetails:e,amount:m,coins_used:a.data.coins_to_use})).unwrap().then(()=>{i(e)})},prefill:{name:o.name||"",email:o.email||"",contact:o.contact||""},theme:{color:"#F37254"},modal:{backdropclose:!1}};new window.Razorpay(h).open()}).catch(a=>{console.error("Error initiating payment:",a)})}catch(a){console.error("Error initiating payment:",a)}},razorpayDivRef:u}};export{v as P,w as u};
