import{r as n,I as G,_ as Y,e as E,d as A,j as s,u as H,aJ as X,aK as z,a as J,A as j,aL as K,aM as U,s as V}from"./index-CDERYnxk.js";import{N as q,B as Q}from"./NoteComponent-dNrMXDbA.js";import{C as W}from"./courseComponent-Dbq0UCXd.js";import{R as Z}from"./index-BwsKf5DU.js";import{S as D}from"./Search-D5qscPCK.js";import{u as p}from"./useApiQuery-DJpTQFzM.js";var ss={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},es=function(i,o){return n.createElement(G,Y({},i,{ref:o,icon:ss}))},ts=n.forwardRef(es);const ls=({showFilter:e,selectedCategory:i,setSelectedCategory:o,setSelectedStandard:m,selectedStandard:x,selectedSortBy:h,setSelectedSortBy:c})=>{const{categories:u}=E(l=>l.category),{standards:r}=E(l=>l.standard),{theme:t}=A();return s.jsx("div",{className:`lg:w-2/12 w-8/12 ${e?"lg:relative absolute z-10":"hidden"}`,children:s.jsxs("div",{className:`mx-3 p-4 shadow-lg rounded-xl bg-white  flex flex-col overflow-y-auto max-h-[33rem] hide-scrollbar
      ${t.PRIMARY_BORDER}  `,children:[s.jsx("div",{className:`font-bold text-2xl mb-4 underline underline-offset-2  ${t.PRIMARY_TEXT} select-none`,children:"Filters"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT}  select-none`,children:"Categories"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>o(null),children:[s.jsx("input",{type:"radio",id:"category",name:"category",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!i,onChange:()=>o(null)}),s.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer ",children:"All"})]}),[...u].map((l,a)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>o(l.category),children:[s.jsx("input",{type:"radio",id:`category-${a}`,name:"category",value:l.category,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:i===l.category,onChange:()=>o(l.category)}),s.jsx("label",{htmlFor:`category-${a}`,className:"text-sm cursor-pointer ",children:l.category})]},a))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Standards"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>m(null),children:[s.jsx("input",{type:"radio",id:"standard",name:"standard",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!x,onChange:()=>m(null)}),s.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer ",children:"All"})]}),[...r].map((l,a)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>m(l.standard),children:[s.jsx("input",{type:"radio",id:`standard-${a}`,name:"standard",value:l.standard,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:x===l.standard,onChange:()=>m(l.standard)}),s.jsx("label",{htmlFor:`standard-${a}`,className:"text-sm cursor-pointer ",children:l.standard})]},a))]})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Sort By"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(null),children:[s.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!h,onChange:()=>c(null)}),s.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer ",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((l,a)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>c(l),children:[s.jsx("input",{type:"radio",id:`SortBy-${a}`,name:"SortBy",value:l,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:h===l,onChange:()=>c(l)}),s.jsx("label",{htmlFor:`SortBy-${a}`,className:"text-sm cursor-pointer ",children:l})]},a))]})]})]})})},cs=({paper:e,className:i})=>{const o=H(),m=u=>{o(`/papers/purchase/${u}`)},{theme:x}=A(),{rating:h,views:c}=X(e);return s.jsx("div",{className:`flex flex-col w-full shadow-md cursor-pointer rounded-xl h-full ${x.PRIMARY_BORDER} p-2 justify-between ${i}`,onClick:()=>m(e.id),children:s.jsxs("div",{className:"flex md:flex-row flex-col h-full gap-2",children:[s.jsx("div",{className:`${e!=null&&e.thumbnail_url?"md:max-w-1/3 w-full":"md:hidden w-full md:h-0 h-96"} md:flex-1 flex-shrink-0   md:h-full  rounded-xl overflow-hidden flex my-auto`,children:e!=null&&e.thumbnail_url?s.jsx("img",{src:e.thumbnail_url,alt:e.title,className:"object-contain w-full"}):s.jsx("div",{className:"flex items-center justify-center h-full p-2 text-center text-gray-500 break-words text-sm",children:e.title})}),s.jsxs("div",{className:"flex flex-col flex-1 h-full justify-between",children:[s.jsxs("div",{className:"flex flex-col flex-grow gap-2 p-3 text-gray-600",children:[s.jsx("h2",{className:"font-bold lg:text-xl md:text-base text-sm text-black line-clamp-3 break-all",children:e==null?void 0:e.title}),s.jsx("p",{className:"italic line-clamp-3 lg:text-md md:text-sm text-xs",children:e==null?void 0:e.description}),s.jsxs("div",{className:"flex items-center text-sm mt-auto",children:[s.jsx("span",{children:h}),s.jsx(Z,{className:"px-1",value:h,disabled:!0,allowHalf:!0}),s.jsxs("span",{children:["(",c,")"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center lg:p-3 p-2 border-t",children:[s.jsx("div",{children:e!=null&&e.is_paid&&JSON.parse(e==null?void 0:e.is_paid)?s.jsxs("span",{className:"lg:text-xl md:text-base text-sm font-semibold",children:["₹",e!=null&&e.discount&&(e==null?void 0:e.discount)>0?s.jsxs(s.Fragment,{children:[(e==null?void 0:e.amount)*(100-(e==null?void 0:e.discount))/100," ",s.jsxs("span",{className:"line-through font-medium md:text-base text-xs text-gray-500",children:["₹",e==null?void 0:e.amount]})]}):e==null?void 0:e.amount]}):"Free"}),s.jsx("button",{className:`${x.COLOR_BUTTON} lg:text-md md:text-base text-xs`,children:"View Details"})]})]})]})})},ns=({isCourse:e,isNote:i,isBook:o,isPaper:m,setPage:x,totalData:h,renderData:c})=>{const u=n.useRef(null);return n.useEffect(()=>{const r=()=>{const l=u.current;l&&l.scrollTop+l.clientHeight>=l.scrollHeight-50&&(c==null?void 0:c.length)<h&&x(b=>b+1)},t=u.current;return t&&t.addEventListener("scroll",r),()=>{t&&t.removeEventListener("scroll",r)}},[x,i,e,h,c==null?void 0:c.length]),s.jsxs("div",{ref:u,className:" w-full max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[e&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:[...c].map((r,t)=>s.jsx(W,{course:r,className:"bg-white/50 border border-gray-200"},t))}),i&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((r,t)=>s.jsx(q,{material:r,className:"bg-white/50 border border-gray-200"},t))}),o&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((r,t)=>s.jsx(Q,{book:r,className:"bg-white/50 border border-gray-200"},t))}),m&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((r,t)=>s.jsx(cs,{paper:r,className:"bg-white/50 border border-gray-200"},t))})]})},us=({isCourse:e=!1,isNote:i=!1,isBook:o=!1,isPaper:m=!1})=>{const[x]=z(),{categories:h}=E(d=>d.category),{standards:c}=E(d=>d.standard);J();const{theme:u}=A(),{dispatch:r}=V,[t,l]=n.useState(null),[a,b]=n.useState(null),[R,L]=n.useState(null),[_,P]=n.useState({}),[I,F]=n.useState(!1),[S,$]=n.useState([]),[M,O]=n.useState(),[C,v]=n.useState(1),[w,B]=n.useState(""),[T,k]=n.useState(""),{data:g,isLoading:as}=p({queryKey:e?j.GET_ALL_COURSE:i?j.GET_ALL_MATERIAL:o?j.GET_ALL_BOOK:m?j.GET_ALL_PAPER:"",endpoint:e?j.GET_ALL_COURSE:i?j.GET_ALL_MATERIAL:o?j.GET_ALL_BOOK:m?j.GET_ALL_PAPER:()=>{},params:{page:C,limit:20,search:w||"",..._},options:{staleTime:1e3*60*5,cacheTime:1e3*60*10,refetchOnWindowFocus:!0}});return n.useEffect(()=>{k(()=>e?"Courses":i?"Notes":o?"Books":m?"Papers":"")},[e,i,o,m]),n.useEffect(()=>{var y,f;const d=Array.isArray((y=g==null?void 0:g.data)==null?void 0:y.data)?g.data.data:[];$(N=>[...N,...d]),O((f=g==null?void 0:g.data)==null?void 0:f.total)},[g,w]),n.useEffect(()=>{const d=x.get("category")||null,y=x.get("standard")||null,f=x.get("sortby")||null;l(d),b(y),L(f)},[x]),n.useEffect(()=>{const d={};if(t){const f=h.find(N=>N.category===t);f&&(d.category=f.id)}if(a){const f=c.find(N=>N.standard===a);f&&(d.standard=f.id)}R&&(d.sortby=R),JSON.stringify(d)!==JSON.stringify(_)&&(v(1),r(K()),r(U()),P(d))},[t,a,R]),n.useEffect(()=>()=>{v(1),$([])},[w,_]),s.jsxs("div",{children:[s.jsx("h1",{className:`text-3xl font-bold text-center ${u.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${T}`}),s.jsxs("div",{className:"flex  gap-2 justify-center items-center w-full",children:[s.jsx("p",{className:`text-xl font-bold text-center ${u.PRIMARY_TEXT}  `,children:"Filter"}),s.jsx("button",{className:`${u.PRIMARY_BG} p-3 rounded-full text-white shadow-lg w-10 h-10 flex justify-center items-center`,onClick:()=>F(d=>!d),"aria-label":"Open filter",children:s.jsx(ts,{style:{fontSize:"24px"}})}),s.jsx(D,{displayText:T,setSearch:B})]}),s.jsxs("div",{className:"flex m-4 h-[33rem]",children:[s.jsx(ls,{showFilter:I,selectedCategory:t,selectedSortBy:R,selectedStandard:a,setSelectedCategory:l,setSelectedSortBy:L,setSelectedStandard:b}),s.jsx(ns,{isCourse:e,isNote:i,isBook:o,isPaper:m,setPage:v,renderData:S,totalData:M})]})]})};export{us as P};
