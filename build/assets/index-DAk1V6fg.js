import{r as h,I as B,_ as C,e as g,d as N,j as e,aW as L,a as S,v as Y,aX as k,aY as w,aZ as $,s as T}from"./index-DB2EwENR.js";import{u as H}from"./usePagination-Doog0lNp.js";import{N as D}from"./NoteComponent-DlPkwqgc.js";import{C as O}from"./courseComponent-ao5TdEig.js";import{R as G}from"./SearchOutlined-CUrvdLBZ.js";var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},z=function(n,r){return h.createElement(B,C({},n,{ref:r,icon:X}))},V=h.forwardRef(z);const J=({showFilter:d,selectedCategory:n,setSelectedCategory:r,setSelectedStandard:m,selectedStandard:l,selectedSortBy:x,setSelectedSortBy:o})=>{const{categories:u}=g(s=>s.category),{standards:a}=g(s=>s.standard),{theme:t}=N();return e.jsx("div",{className:`lg:w-2/12 w-8/12 ${d?"lg:relative absolute z-10":"hidden"}`,children:e.jsxs("div",{className:`mx-3 p-4 shadow-lg rounded-xl bg-white  flex flex-col overflow-y-auto max-h-[33rem] hide-scrollbar
      ${t.PRIMARY_BORDER}  `,children:[e.jsx("div",{className:`font-bold text-2xl mb-4 underline underline-offset-2  ${t.PRIMARY_TEXT} select-none`,children:"Filters"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT}  select-none`,children:"Categories"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>r(null),children:[e.jsx("input",{type:"radio",id:"category",name:"category",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!n,onChange:()=>r(null)}),e.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer ",children:"All"})]}),[...u].map((s,i)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>r(s.category),children:[e.jsx("input",{type:"radio",id:`category-${i}`,name:"category",value:s.category,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:n===s.category,onChange:()=>r(s.category)}),e.jsx("label",{htmlFor:`category-${i}`,className:"text-sm cursor-pointer ",children:s.category})]},i))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Standards"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>m(null),children:[e.jsx("input",{type:"radio",id:"standard",name:"standard",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!l,onChange:()=>m(null)}),e.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer ",children:"All"})]}),[...a].map((s,i)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>m(s.standard),children:[e.jsx("input",{type:"radio",id:`standard-${i}`,name:"standard",value:s.standard,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:l===s.standard,onChange:()=>m(s.standard)}),e.jsx("label",{htmlFor:`standard-${i}`,className:"text-sm cursor-pointer ",children:s.standard})]},i))]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg mb-2 font-semibold ${t.PRIMARY_TEXT} select-none`,children:"Sort By"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>o(null),children:[e.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!x,onChange:()=>o(null)}),e.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer ",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((s,i)=>e.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${t.HEADER_LI}`,onClick:()=>o(s),children:[e.jsx("input",{type:"radio",id:`SortBy-${i}`,name:"SortBy",value:s,className:`${t.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:x===s,onChange:()=>o(s)}),e.jsx("label",{htmlFor:`SortBy-${i}`,className:"text-sm cursor-pointer ",children:s})]},i))]})]})]})})},W=({isCourse:d,isNote:n,setPage:r})=>{const m=h.useRef(null),{materials:l,totalMaterials:x}=g(a=>a.material),{courses:o,totalCourses:u}=g(a=>a.course);return h.useEffect(()=>{const a=()=>{const s=m.current;s&&s.scrollTop+s.clientHeight>=s.scrollHeight-50&&(n?(l==null?void 0:l.length)<x&&r(f=>f+1):d&&(o==null?void 0:o.length)<u&&r(f=>f+1))},t=m.current;return t&&t.addEventListener("scroll",a),()=>{t&&t.removeEventListener("scroll",a)}},[r,n,d,l==null?void 0:l.length,x,o==null?void 0:o.length,u]),e.jsxs("div",{ref:m,className:"lg:w-10/12 w-full max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[d&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-2",children:[...o].map((a,t)=>e.jsx(O,{course:a,className:"bg-white/50 border border-gray-200"},t))}),n&&e.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:l==null?void 0:l.map((a,t)=>e.jsx(D,{material:a,className:"bg-white/50 border border-gray-200"},t))})]})},Z=({isCourse:d,isNote:n,setSearch:r})=>{const{theme:m}=N();return e.jsx("div",{className:"p-3 relative h-fit w-8/12 flex  whitespace-nowrap justify-center items-center ",children:e.jsxs("div",{className:"relative w-full ",children:[e.jsx("input",{id:"search",className:"pl-5 pr-14 border-2 border-solid text-black border-white focus-visible:border-white rounded-full py-3 px-3 w-full placeholder-gray-500 shadow-2xl",placeholder:`Search  ${d?"Courses":""} ${n?"Notes":""}`,onChange:l=>r(l.target.value)}),e.jsx(G,{className:`text-2xl absolute right-4 p-2 rounded-full top-1.5 ${m.PRIMARY_BG} text-white`})]})})},re=({isCourse:d=!1,isNote:n=!1})=>{const[r]=L(),{categories:m}=g(c=>c.category),{standards:l}=g(c=>c.standard),{showToast:x}=S(),{theme:o}=N(),{dispatch:u}=T,[a,t]=h.useState(null),[s,i]=h.useState(null),[f,R]=h.useState(null),[j,E]=h.useState({}),[A,I]=h.useState(!1),{page:P,setPage:b,limit:q,setLimit:K,search:_,setSearch:F,fetchData:M}=H(d?Y:n?k:()=>{},j,c=>{},c=>x(c,"error"));return h.useEffect(()=>{const c=r.get("category")||null,v=r.get("standard")||null,p=r.get("sortby")||null;t(c),i(v),R(p)},[r]),h.useEffect(()=>{const c={};if(a){const p=m.find(y=>y.category===a);p&&(c.category=p.id)}if(s){const p=l.find(y=>y.standard===s);p&&(c.standard=p.id)}f&&(c.sortby=f),JSON.stringify(c)!==JSON.stringify(j)&&(b(1),u(w()),u($()),E(c))},[a,s,f]),h.useEffect(()=>{M()},[j,P,_]),h.useEffect(()=>()=>{u(w()),u($())},[]),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold text-center ${o.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${d?"Courses":""} ${n?"Notes":""}`}),e.jsxs("div",{className:"flex  justify-center items-center w-full",children:[e.jsx("button",{className:`${o.PRIMARY_BG} p-3 rounded-full text-white shadow-lg w-10 h-10 flex justify-center items-center`,onClick:()=>I(c=>!c),"aria-label":"Open filter",children:e.jsx(V,{style:{fontSize:"24px"}})}),e.jsx(Z,{isCourse:d,isNote:n,setSearch:F})]}),e.jsxs("div",{className:"flex m-4 h-[33rem]",children:[e.jsx(J,{showFilter:A,selectedCategory:a,selectedSortBy:f,selectedStandard:s,setSelectedCategory:t,setSelectedSortBy:R,setSelectedStandard:i}),e.jsx(W,{isCourse:d,isNote:n,setPage:b})]})]})};export{re as P};
