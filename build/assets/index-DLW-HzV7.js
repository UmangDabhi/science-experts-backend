import{r as o,I as Y,_ as H,f as E,e as L,j as s,u as X,aE as z,aR as J,bw as U,a as V,A as g,bx as q,by as K,s as Q}from"./index-CYgJ5ZTk.js";import{u as W}from"./useApiQuery-erk2qelE.js";import{N as Z,a as D,B as p}from"./NoteComponent-r-NU5l2v.js";import{C as ss}from"./courseComponent-BRJFJmln.js";import{R as es}from"./index-BU0u-q5C.js";import{S as ts}from"./Search-PVoQXeDO.js";var ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},cs=function(a,i){return o.createElement(Y,H({},a,{ref:i,icon:ls}))},ns=o.forwardRef(cs);const os=({showFilter:e,selectedCategory:a,setSelectedCategory:i,setSelectedStandard:d,selectedStandard:m,selectedSortBy:x,setSelectedSortBy:u})=>{const{categories:c}=E(t=>t.category),{standards:h}=E(t=>t.standard),{theme:l}=L();return s.jsx("div",{className:`lg:w-2/12 w-8/12 ${e?"lg:relative absolute z-10":"hidden"}`,children:s.jsxs("div",{className:`mx-3 p-4 shadow-lg rounded-xl bg-white  flex flex-col overflow-y-auto max-h-[33rem] hide-scrollbar
      ${l.PRIMARY_BORDER}  `,children:[s.jsx("div",{className:`font-bold text-2xl mb-4 underline underline-offset-2  ${l.PRIMARY_TEXT} select-none`,children:"Filters"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${l.PRIMARY_TEXT}  select-none`,children:"Categories"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>i(null),children:[s.jsx("input",{type:"radio",id:"category",name:"category",className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!a,onChange:()=>i(null)}),s.jsx("label",{htmlFor:"category",className:"text-sm cursor-pointer ",children:"All"})]}),[...c].map((t,n)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>i(t.category),children:[s.jsx("input",{type:"radio",id:`category-${n}`,name:"category",value:t.category,className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:a===t.category,onChange:()=>i(t.category)}),s.jsx("label",{htmlFor:`category-${n}`,className:"text-sm cursor-pointer ",children:t.category})]},n))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${l.PRIMARY_TEXT} select-none`,children:"Standards"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>d(null),children:[s.jsx("input",{type:"radio",id:"standard",name:"standard",className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!m,onChange:()=>d(null)}),s.jsx("label",{htmlFor:"standard",className:"text-sm cursor-pointer ",children:"All"})]}),[...h].map((t,n)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>d(t.standard),children:[s.jsx("input",{type:"radio",id:`standard-${n}`,name:"standard",value:t.standard,className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:m===t.standard,onChange:()=>d(t.standard)}),s.jsx("label",{htmlFor:`standard-${n}`,className:"text-sm cursor-pointer ",children:t.standard})]},n))]})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-lg mb-2 font-semibold ${l.PRIMARY_TEXT} select-none`,children:"Sort By"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>u(null),children:[s.jsx("input",{type:"radio",id:"SortBy",name:"SortBy",className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:!x,onChange:()=>u(null)}),s.jsx("label",{htmlFor:"SortBy",className:"text-sm cursor-pointer ",children:"All"})]}),["Most Populer","Newest First","Price:Low to High","Price:High to Low"].map((t,n)=>s.jsxs("li",{className:`flex items-center gap-3 cursor-pointer ${l.HEADER_LI}`,onClick:()=>u(t),children:[s.jsx("input",{type:"radio",id:`SortBy-${n}`,name:"SortBy",value:t,className:`${l.PRIMARY_BG} accent-[#F68713] cursor-pointer`,checked:x===t,onChange:()=>u(t)}),s.jsx("label",{htmlFor:`SortBy-${n}`,className:"text-sm cursor-pointer ",children:t})]},n))]})]})]})})},is=({paper:e,className:a})=>{const i=X(),{requireAuth:d}=z(),{theme:m}=L(),x=h=>{const l=e!=null&&e.is_paid&&JSON.parse(e==null?void 0:e.is_paid)?`purchase and download "${e==null?void 0:e.title}" paper`:`download the free "${e==null?void 0:e.title}" paper`;d(l)&&i(`/papers/purchase/${h}`)},{rating:u,views:c}=J(e);return s.jsx("div",{className:`flex flex-col w-full shadow-md cursor-pointer rounded-xl h-full ${m.PRIMARY_BORDER} p-2 justify-between ${a}`,onClick:()=>x(e.id),children:s.jsxs("div",{className:"flex md:flex-row flex-col h-full gap-2",children:[s.jsx("div",{className:`${e!=null&&e.thumbnail_url?"md:max-w-1/3 w-full":"md:hidden w-full md:h-0 h-96"} md:flex-1 flex-shrink-0   md:h-full  rounded-xl overflow-hidden flex my-auto`,children:e!=null&&e.thumbnail_url?s.jsx("img",{src:e.thumbnail_url,alt:e.title,className:"object-contain w-full"}):s.jsx("div",{className:"flex items-center justify-center h-full p-2 text-center text-gray-500 break-words text-sm",children:e.title})}),s.jsxs("div",{className:"flex flex-col flex-1 h-full justify-between",children:[s.jsxs("div",{className:"flex flex-col flex-grow gap-2 p-3 text-gray-600",children:[s.jsx("h2",{className:"font-bold lg:text-xl md:text-base text-sm text-black line-clamp-3 break-all",children:e==null?void 0:e.title}),s.jsx("p",{className:"italic line-clamp-3 lg:text-md md:text-sm text-xs",children:e==null?void 0:e.description}),s.jsxs("div",{className:"flex items-center text-sm mt-auto",children:[s.jsx("span",{children:u}),s.jsx(es,{className:"px-1",value:u,disabled:!0,allowHalf:!0}),s.jsxs("span",{children:["(",c,")"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center lg:p-3 p-2 border-t",children:[s.jsx("div",{children:e!=null&&e.is_purchased?s.jsx("span",{className:"lg:text-xl md:text-base text-sm font-semibold text-primary",children:"Owned"}):e!=null&&e.is_paid&&JSON.parse(e==null?void 0:e.is_paid)?s.jsxs("span",{className:"lg:text-xl md:text-base text-sm font-semibold",children:["₹",e!=null&&e.discount&&(e==null?void 0:e.discount)>0?s.jsxs(s.Fragment,{children:[(e==null?void 0:e.amount)*(100-(e==null?void 0:e.discount))/100," ",s.jsxs("span",{className:"line-through font-medium md:text-base text-xs text-gray-500",children:["₹",e==null?void 0:e.amount]})]}):e==null?void 0:e.amount]}):s.jsx("span",{className:"lg:text-xl md:text-base text-sm font-semibold text-blue-600",children:"Free"})}),s.jsx("button",{className:`${m.COLOR_BUTTON} lg:text-md md:text-base text-xs`,children:"View Details"})]})]})]})})},as=({isCourse:e,isNote:a,isBook:i,isPaper:d,isBlog:m,setPage:x,totalData:u,renderData:c})=>{const h=o.useRef(null);return o.useEffect(()=>{const l=()=>{const n=h.current;n&&n.scrollTop+n.clientHeight>=n.scrollHeight-50&&(c==null?void 0:c.length)<u&&x(R=>R+1)},t=h.current;return t&&t.addEventListener("scroll",l),()=>{t&&t.removeEventListener("scroll",l)}},[x,a,e,u,c==null?void 0:c.length]),s.jsxs("div",{ref:h,className:" w-full max-h-[calc(100vh-2rem)] overflow-y-auto pb-5 hide-scrollbar",children:[e&&s.jsx("div",{className:"gap-3 grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1",children:[...c].map((l,t)=>s.jsx(ss,{course:l,className:"bg-white/50 border border-gray-200"},t))}),a&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((l,t)=>s.jsx(Z,{material:l,className:"bg-white/50 border border-gray-200"},t))}),i&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((l,t)=>s.jsx(D,{book:l,className:"bg-white/50 border border-gray-200"},t))}),d&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((l,t)=>s.jsx(is,{paper:l,className:"bg-white/50 border border-gray-200"},t))}),m&&s.jsx("div",{className:"gap-3 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1",children:c==null?void 0:c.map((l,t)=>s.jsx(p,{blog:l,className:"bg-white/50 border border-gray-200"},t))})]})},gs=({isCourse:e=!1,isNote:a=!1,isBook:i=!1,isPaper:d=!1,isBlog:m=!1})=>{const[x]=U(),{categories:u}=E(r=>r.category),{standards:c}=E(r=>r.standard);V();const{theme:h}=L(),{dispatch:l}=Q,[t,n]=o.useState(null),[b,R]=o.useState(null),[_,$]=o.useState(null),[w,I]=o.useState({}),[O,F]=o.useState(!1),[S,T]=o.useState([]),[C,M]=o.useState(),[B,A]=o.useState(1),[v,G]=o.useState(""),[P,k]=o.useState(""),{data:j,isLoading:rs}=W({queryKey:e?g.GET_ALL_COURSE:a?g.GET_ALL_MATERIAL:i?g.GET_ALL_BOOK:d?g.GET_ALL_PAPER:m?g.GET_ALL_BLOG:"",endpoint:e?g.GET_ALL_COURSE:a?g.GET_ALL_MATERIAL:i?g.GET_ALL_BOOK:d?g.GET_ALL_PAPER:m?g.GET_ALL_BLOG:()=>{},params:{page:B,limit:20,search:v||"",...w},options:{staleTime:1e3*60*5,cacheTime:1e3*60*10,refetchOnWindowFocus:!0}});return o.useEffect(()=>{k(()=>e?"Courses":a?"Notes":i?"Books":d?"Papers":m?"Blogs":"")},[e,a,i,d,m]),o.useEffect(()=>{var N,f;const r=Array.isArray((N=j==null?void 0:j.data)==null?void 0:N.data)?j.data.data:[];T(y=>[...y,...r]),M((f=j==null?void 0:j.data)==null?void 0:f.total)},[j,v]),o.useEffect(()=>{const r=x.get("category")||null,N=x.get("standard")||null,f=x.get("sortby")||null;n(r),R(N),$(f)},[x]),o.useEffect(()=>{const r={};if(t){const f=u.find(y=>y.category===t);f&&(r.category=f.id)}if(b){const f=c.find(y=>y.standard===b);f&&(r.standard=f.id)}_&&(r.sortby=_),JSON.stringify(r)!==JSON.stringify(w)&&(A(1),l(q()),l(K()),I(r))},[t,b,_]),o.useEffect(()=>()=>{A(1),T([])},[v,w]),s.jsxs("div",{children:[s.jsx("h1",{className:`text-3xl font-bold text-center ${h.PRIMARY_TEXT} pt-6 `,children:`Explore Our ${P}`}),s.jsxs("div",{className:"flex  gap-2 justify-center items-center w-full",children:[s.jsx("p",{className:`text-xl font-bold text-center ${h.PRIMARY_TEXT}  `,children:"Filter"}),s.jsx("button",{className:`${h.PRIMARY_BG} p-3 rounded-full text-white shadow-lg w-10 h-10 flex justify-center items-center`,onClick:()=>F(r=>!r),"aria-label":"Open filter",children:s.jsx(ns,{style:{fontSize:"24px"}})}),s.jsx(ts,{displayText:P,setSearch:G})]}),s.jsxs("div",{className:"flex m-4 h-[33rem]",children:[s.jsx(os,{showFilter:O,selectedCategory:t,selectedSortBy:_,selectedStandard:b,setSelectedCategory:n,setSelectedSortBy:$,setSelectedStandard:R}),s.jsx(as,{isCourse:e,isNote:a,isBook:i,isPaper:d,isBlog:m,setPage:A,renderData:S,totalData:C})]})]})};export{gs as P};
