import{r as c,I as S,_ as q,u as D,e as v,d as F,a as B,j as s,J as L,K as z,y as b,N as w,s as X,O as Y,P as V,E as H}from"./index-Djrfb291.js";import{A as J,R as K}from"./ActionButtons-DGx60Mdx.js";import{u as U,A as G,C as Q}from"./useModal-DGSCEAc7.js";import{S as W}from"./Search-CUe9Yqwl.js";import{u as Z}from"./usePagination-B_jzL8CS.js";import{s as ee}from"./courseService-Bs4kbx41.js";import{S as y}from"./index-DPXBp5Kr.js";import{R as te}from"./EditOutlined-CHrbPn7h.js";import"./index-DxMnTIrD.js";import"./index-CR8UhKh5.js";import"./CloseCircleFilled-DPqBYhrr.js";import"./SearchOutlined-KTTeiQzS.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},oe=function(n,l){return c.createElement(S,q({},n,{ref:l,icon:se}))},h=c.forwardRef(oe);const xe=()=>{const{dispatch:a}=X,n=D(),{userData:l}=v(e=>e.auth),{courses:A,totalCourses:k,selectedCourse:j}=v(e=>e.course),{theme:r}=F(),{showToast:i}=B(),{page:p,setPage:m,limit:g,setLimit:N,search:x,setSearch:I,fetchData:d}=Z(Y,{},e=>{},e=>i(e,"error")),{isOpen:M,openModal:R,closeModal:C}=U();c.useEffect(()=>{d()},[p,g,x]),c.useEffect(()=>{m(1)},[x]);const f=[{title:"Course Title",dataIndex:"title",key:"title"},{title:"Is Paid",dataIndex:"is_paid",key:"is_paid",width:"12%",render:(e,t)=>s.jsx(y,{onChange:o=>$(t,o),checkedChildren:"Paid",unCheckedChildren:"Free",style:{backgroundColor:"#F68713"},value:e})},{title:"Amount",dataIndex:"price",key:"amount",width:"12%",editable:e=>e==null?void 0:e.is_paid,render:(e,t)=>s.jsx("span",{className:`text-lg font-semibold ${r.PRIMARY_TEXT}`,children:t!=null&&t.is_paid?`â‚¹${e}`:"Free"})},{title:"Discount",dataIndex:"discount",key:"discount",width:"12%",editable:e=>e==null?void 0:e.is_paid,render:(e,t)=>s.jsx("span",{className:`text-lg font-semibold ${r.PRIMARY_TEXT}`,children:t!=null&&t.is_paid?`${e}%`:"Free"})},...(l==null?void 0:l.role)==L.ADMIN?[{title:"Approval",dataIndex:"is_approved",key:"is_approved",width:"12%",render:(e,t)=>s.jsx(y,{onChange:o=>P(t,o),checkedChildren:"Approved",unCheckedChildren:"Not Approved",style:{backgroundColor:"#F68713"},value:e})}]:[],{title:"Action",key:"action",width:"33%",render:(e,t)=>s.jsx(J,{className:"flex flex-wrap justify-center items-center",buttons:[{text:"Order",onClick:()=>{n(`/ManageOrder/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Module",onClick:()=>{n(`/courses/module/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Notes",onClick:()=>{n(`/material/${t.id}`)},icon:h,color:{text:"text-white",bg:"bg-green-500",hover:"hover:bg-green-600"},tooltip:"Add New"},{text:"Edit",onClick:()=>{n(`/addcourse/${t.id}`)},icon:te,color:{text:"text-yellow-700",bg:"bg-yellow-100",hover:"hover:bg-yellow-200"}},{text:"Delete",onClick:()=>{a(z(t)),R()},icon:K,color:{text:"text-red-600",bg:"bg-red-200",hover:"hover:bg-red-300"}}]})}].filter(Boolean);console.log("columns",f);const _=(e,t)=>{m(e),N(t)},O=()=>{n("/addcourse")},T=()=>{a(V(j)).unwrap().then(e=>{C(),d(),a(H()),i(e.message,"success")}).catch(e=>{i(e,"error")})},P=(e,t)=>{const o=b({id:e.id,is_approved:t});a(w(o)).unwrap().then(u=>{d(),i(u.message,"success")})},$=(e,t)=>{const o=b({id:e.id,is_paid:t});a(w(o)).unwrap().then(u=>{d(),i(u.message,"success")})},E=e=>{const t={...e,language:e.language?e.language.id:null};ee({data:t,content:e.content?e.content:"",dispatch:a,courseId:e.id}).then(o=>{d(),i(o.message,"success")})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12 mt-2 ",children:[s.jsx("h1",{className:`text-2xl font-bold text-center ${r.PRIMARY_TEXT}`,children:"Course Management"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(W,{displayText:"Course",setSearch:I}),s.jsx("button",{onClick:O,className:`${r.COLOR_BUTTON} text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300`,children:"Add Course"})]})]}),s.jsx(G,{columns:f,dataSource:A,current:p,pageSize:g,total:k,onChange:_,onSaveRow:E}),s.jsx(Q,{title:"Confirm Deletion",isOpen:M,onCancel:C,onOk:T,children:s.jsx("p",{children:"Are you sure you want to delete this standard?"})})]})};export{xe as default};
