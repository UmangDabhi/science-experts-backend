import{C as E,f as u,r as a,aH as T,a as x,aO as L,e as R,aR as S,j as I,s as j}from"./index-pNvrWSmY.js";import{u as v,P as A}from"./useRazorpayPayment-CqoGuP9T.js";import{u as J,P as N}from"./PurchasePreviewComponent-Bq-1T0Mp.js";import"./actions-DOmdXVJ5.js";import"./index-CD8KK78h.js";import"./ContextIsolator-DrMfFJ7f.js";import"./index-CSUN6ZqK.js";import"./index-D2mLwxQq.js";const F=()=>{const{dispatch:m}=j,{materialId:o}=E(),{selectedMaterial:s,materials:k}=u(t=>t.material),{initiatePayment:p,razorpayDivRef:z}=v(),{initiateDownload:f,isLoading:d}=J(),[l,e]=a.useState(!1),[n,h]=a.useState(!1),{openPrompt:i}=T(),{userDetails:r}=u(t=>t.auth),{showToast:P}=x(),D=()=>{if(!r){i();return}e(!0),p({useCoins:n,type:A.MATERIAL,itemId:s==null?void 0:s.id,name:s==null?void 0:s.title,description:s==null?void 0:s.description,user:{name:"John Doe",email:"John Doe",contact:"John Doe"},onSuccess:t=>{c(),P("Purchase Success!")}}).finally(()=>e(!1))};a.useEffect(()=>{o&&c()},[o]);const g=(t,C)=>{if(!r){i();return}f(t,C)},c=()=>{m(L({id:o}))};R();const{rating:w,views:y}=S(s);return I.jsx(N,{selectedItem:s,rating:w,views:y,useCoins:n,setUseCoins:h,handlePurchaseClick:D,handleDownloadClick:g,loading:l,downloadLoading:d})};export{F as default};
