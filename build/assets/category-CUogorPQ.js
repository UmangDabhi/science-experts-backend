import{c as v,r as u,j as t,m as P,T as m,U as R,V,W as q,X as p,s as z}from"./index-gq12ktLK.js";import{D as B}from"./DynamicForm-K9isAD-p.js";import{A as I}from"./ActionButtons-BiUQhC3x.js";import{u as h,A as L,C as y}from"./useModal-DLDnYem5.js";import{u as U,T as W}from"./Toast-BCn7xGeU.js";import{u as X}from"./usePagination-DMT-xorY.js";import"./index-CII06FMK.js";import"./SearchOutlined-CkQO2FyM.js";const te=()=>{const{dispatch:s}=z,{categories:x,totalCategories:f,selectedCategory:o}=v(e=>e.category),{toasts:C,showToast:r}=U(),{isOpen:b,openModal:g,closeModal:F}=h(),{isOpen:j,openModal:M,closeModal:i}=h(),n=u.useRef(),{page:A,setPage:w,limit:E,setLimit:O,search:G,setSearch:H,fetchData:l}=X(P,{},e=>{},e=>r(e,"error"));u.useEffect(()=>{l()},[]);const D=(e,a)=>{w(e),O(a),l()},k=[{title:"Category Name",dataIndex:"category",key:"category"},{title:"Action",key:"action",render:(e,a)=>t.jsx(I,{onEdit:()=>{s(m(a)),g()},onDelete:()=>{M(),s(m(a))}})}],S=[Object.keys(o).length&&{name:"id",label:"id",type:"hidden"},{name:"category",label:"Category Name",type:"text",inputClass:" border border-[#FFA167] focus:outline-none focus:ring-1 focus:ring-[#FF6200] focus:border-[#FF6200] text-[#333] placeholder-[#888] rounded-xl shadow-md px-4 py-2 transition duration-200 ease-in-out",required:!0}],T=e=>{const a=Object.keys(o).length?R:V;s(a(e)).unwrap().then(d=>{c(),l(),r(d.message,"success")}).catch(d=>{c(),r(d,"error")})},N=()=>{s(q(o)).unwrap().then(e=>{i(),l(),s(p()),r(e.message,"success")}).catch(e=>{i(),r(e,"error")})};u.useEffect(()=>{n.current&&o&&n.current.resetForm({...o})},[o]);const c=()=>{F(),n.current.resetForm({category:null}),s(p())};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 mx-12",children:[t.jsx("h1",{className:"text-2xl font-bold text-center text-[#FF6200]",children:"Category Management"}),t.jsx("button",{onClick:g,className:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300",children:"Add Category"})]}),t.jsx(L,{columns:k,dataSource:x,current:A,pageSize:E,total:f,onChange:D}),t.jsx(W,{toasts:C}),t.jsx(y,{title:Object.keys(o).length?"Edit Category":"Add Category",isOpen:b,onCancel:c,footer:null,children:t.jsx(B,{ref:n,formConfig:S,onSubmit:T,initialValues:o,formClass:"space-y-8 w-full",submitClass:"!bg-[#FF6200] !hover:bg-[#FF62000A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg transition duration-300"})}),t.jsx(y,{title:"Confirm Deletion",isOpen:j,onCancel:i,onOk:N,children:t.jsx("p",{children:"Are you sure you want to delete this category?"})})]})};export{te as default};
